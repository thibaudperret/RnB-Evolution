!function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=11)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(7),r=i(3),o=i(4),s=i(5),a=i(16),d=function(){function e(){}return e.buildBrowsiOutput=function(e){e.debugMode&&(window.browsiOutput=Object.assign(window.browsiOutput,e,{getFiredEvents:r.EventsService.getFiredEvents}))},e.querySelector=function(e,t){if(e)try{return document.querySelector(e)}catch(i){t("Invalid selector ["+e+"]")}return null},e.getLoaderParams=function(){return window._middyo},e.isEmptyObj=function(e){return 0===Object.keys(e).length},e.querySelectorAll=function(e,t){return e&&e.length?e.reduce(function(e,i){var n=[];try{n=Array.from(document.querySelectorAll(i))}catch(e){t("Invalid selector ["+i+"]")}return e.concat(n)},new Array):[]},e.isElement=function(e){return e&&e instanceof Element},e.isDescendantElement=function(e,t){for(var i=0,n=e;i<n.length;i++){var r=n[i];if(this.isContainedElement(r,t))return!0}return!1},e.isContainedElement=function(e,t){return!(!e||!t)&&!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)},e.getElementSize=function(e){return{h:e.getBoundingClientRect().height,w:e.getBoundingClientRect().width}},e.getViewportHeight=function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},e.getViewportWidth=function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},e.getElementFoldNumber=function(t){var i=document.body.getBoundingClientRect(),n=t.getBoundingClientRect().top-i.top+a.FixedHeaderService.get().getNoneFixedHeaderSize(),r=n/e.getViewportHeight()+1;return n>0?Number(r.toFixed(2)):-1},e.getScreenSize=function(){var e=window.top;return{w:e.screen.availWidth||e.screen.width,h:e.screen.availHeight||e.screen.height}},e.getPageWidth=function(){var e=window.top.document,t=e.body,i=e.documentElement;return Math.floor(Math.max(t.scrollWidth,t.offsetWidth,i.clientWidth,i.scrollWidth,i.offsetWidth))},e.getPageHeight=function(){var e=window.top.document,t=e.body,i=e.documentElement;return Math.floor(Math.max(t.scrollHeight,t.offsetHeight,i.clientHeight,i.scrollHeight,i.offsetHeight))},e.getElementCoordinates=function(e){var t=e.getBoundingClientRect(),i=document.body,n=document.documentElement,r=window.top.pageYOffset||n.scrollTop||i.scrollTop,o=window.top.pageXOffset||n.scrollLeft||i.scrollLeft,s=n.clientTop||i.clientTop||0,d=n.clientLeft||i.clientLeft||0,l=t.top+r-s+a.FixedHeaderService.get().getNoneFixedHeaderSize(),p=t.left+o-d;return{top:Math.round(l),left:Math.round(p)}},e.isVisible=function(t){var i=t;return e.isElement(i)&&null!==i.offsetParent&&i.getBoundingClientRect().height>1&&"0"!==window.getComputedStyle(i).opacity},e.calculateDistanceBetween=function(t,i){var n=0;if(t&&i&&t!==i){var r=e.sortElementsByDomOrder(t,i);n=e.getElementCoordinates(r.lower).top-e.getElementCoordinates(r.upper).top,e.isDescendantElement([r.upper],r.lower)||(n-=e.getElementSize(r.upper).h)}return n},e.sortElementsByDomOrder=function(t,i){return e.getElementCoordinates(t).top<e.getElementCoordinates(i).top?{upper:t,lower:i}:{upper:i,lower:t}},e.getVisibleElements=function(t,i){var n=[],r=t.length?","+t.toString():"";t.length&&(n=i.reduce(function(i,n){return i.concat(Array.from(n.querySelectorAll(t.toString()))).filter(function(t){return e.isVisible(t)})},[]));var o=i.reduce(function(t,i){return t.concat(Array.from(i.querySelectorAll("P"+r)).filter(function(t){return e.isVisible(t)}))},[]).filter(function(t){return!e.isDescendantElement(n,t)});return Array.from(new Set(o))},e.isFloatImage=function(e){if("IMG"!==e.nodeName)return!1;var t=window.getComputedStyle(e);return"right"===t.getPropertyValue("float")||"left"===t.getPropertyValue("float")},e.isParagraphElement=function(e){return"P"===e.nodeName},e.isEmptyParagraph=function(e){return!(!this.isParagraphElement(e)||n.isNullOrUndefined(e.textContent))&&0===e.textContent.replace(/\s*/,"").length},e.isPositionOrderAs=function(e,t){return!n.isUndefined(t)&&!!(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING)},e.isPositionFixed=function(e){return"fixed"===window.getComputedStyle(e).position},e.removeElementsPositionedAfter=function(t,i){return n.isNullOrUndefined(t)?i:i.filter(function(i){return e.isPositionOrderAs(i,t)})},e.toUrlParams=function(e){return Object.keys(e).map(function(t){return t+"="+encodeURIComponent(e[t])}).join("&")},e.onIframeLoad=function(e,t){if(e.contentWindow&&"complete"===e.contentWindow.document.readyState)t();else var i=window.setInterval(function(){e.contentWindow&&"complete"===e.contentWindow.document.readyState&&(window.clearInterval(i),t())},100)},e.getMarginTopBySpotStyle=function(e,t,i){i=i.previousElementSibling&&t===o.EmbedType.BREAK?i.previousElementSibling:e.ref;var n=window.getComputedStyle(i),r=16,s=n.margin.split(" ");if(n.margin){var a=Number(s[0].replace("px",""));r=t===o.EmbedType.BREAK?r-a:a}else if(n.marginTop){a=Number(n.marginTop.replace("px",""));r=t===o.EmbedType.BREAK?r-a:a}return(isNaN(r)||r<0)&&(r=16),r},e.findSizeInSpot=function(e,t){return e.compatibleSizes.find(function(e){return e.w===t.w&&e.h===t.h})},e.appendScript=function(e,t){return new Promise(function(i,n){var r=document.createElement("script");r.async=!0,r.setAttribute("src",e),r.addEventListener("load",function(){i(s.CallbackType.SUCCESS)}),r.addEventListener("error",function(){n(s.CallbackType.ERROR)}),t.iframe?t.iframe.contentDocument.body.appendChild(r):t.wrapper&&t.wrapper.appendChild(r)})},e.createClass=function(e,t,i){var n=i.createElement("style");n.type="text/css",i.getElementsByTagName("head")[0].appendChild(n),(n.sheet||{}).insertRule?n.sheet.insertRule(e+"{"+t+"}",0):(n.styleSheet||n.sheet).addRule(e,t)},e.buildAdMarking=function(t,i){var n=document.createElement("div");n.innerText=i.text,n.id="browsi_adv_"+t.adIndex;var r=i.color?"height: 16px !important;\npadding: 0 !important;\nfont-family: Arial, sans-serif !important;\nmargin: auto !important;\nmargin-bottom: 10px !important;\ntext-align: center !important;\nline-height: 16px !important;\nfont-weight: normal !important;\ncolor:  "+i.color+" !important;\nfont-size: 11px !important;":i.customStyle?i.customStyle:"";return e.createClass(".browsi_adv_"+t.adIndex,r,document),n.setAttribute("class","browsi_adv_"+t.adIndex),n},e.getScrollPosition=function(){var e=a.FixedHeaderService.get();return{top:window.top.pageYOffset+e.getNoneFixedHeaderSize()+e.getFixedHeaderSize(),bottom:window.top.pageYOffset+window.top.innerHeight}},e.getLogStyle=function(e,t,i){return"font-size:"+e+"px;color:"+t+";background:"+i+";"},e.sortByOffsetTop=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e.sort(function(e,t){return e.offsetTop-t.offsetTop})},e.getCurrentTime=function(e){var t=Date.now();return e?Math.floor(t/1e3):t},e.isFluidSize=function(e){return 0===e.w&&0===e.h},e.merge=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object.assign.apply(Object,[{}].concat(e))},e.getSpotCoords=function(t){return t.isImpression&&t.browsiAd.container?t.browsiAd.iframe?e.getElementCoordinates(t.browsiAd.iframe):e.getElementCoordinates(t.browsiAd.container):e.getElementCoordinates(t.ref)},e.findParentElementByType=function(e,t){for(var i=null,n=0,r=Array.from(document.querySelectorAll(e));n<r.length;n++){var o=r[n];this.isContainedElement(o,t)&&(i=o)}return i},e.isObject=function(e){return e&&"object"==typeof e&&!Array.isArray(e)&&null!==e},e.mergeDeep=function(e,t){var i=this;return this.isObject(e)&&this.isObject(t)&&Object.keys(t).forEach(function(n){var r,o;i.isObject(t[n])?(e[n]||Object.assign(e,((r={})[n]={},r)),i.mergeDeep(e[n],t[n])):Object.assign(e,((o={})[n]=t[n],o))}),e},e.removeSpaces=function(e){return e.replace(/(\n|\r|\s+)/gm,"")},e}();t.Utils=d},function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error",e.CUSTOM="custom"}(n=t.LogTypes||(t.LogTypes={}));var r=function(){function e(e){this.loggerSubject=e,this.isActive=!!window._middyo.debug}return e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logMessage(n.DEBUG,e)},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logMessage(n.INFO,e)},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logMessage(n.ERROR,e)},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.logMessage(n.WARN,e)},e.prototype.custom=function(e,t){for(var i=[],r=2;r<arguments.length;r++)i[r-2]=arguments[r];var o=[{msg:e,style:t,args:i}];this.logMessage(n.CUSTOM,o)},e.prototype.logMessage=function(e,t){this.isActive&&(e!==n.CUSTOM?console[e].apply(console,["["+this.loggerSubject+"]"].concat(t)):console.info("%c["+this.loggerSubject+"] "+t[0].msg,t[0].style,t[0].args))},e}();t.Logger=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(6),o=i(4),s=i(1),a=i(8),d=function(){function e(e){this._profile=this.buildProfile(e,this.getRules(e))}return e.prototype.getRules=function(t){if(t.externalFlowHandler&&t.externalFlowHandler.preEngine){try{e.logger.info("initiating rules"),t.externalFlowHandler.preEngine(t)}catch(t){e.logger.error("failed to initiating rules",t)}return t.externalFlowHandler}},e.get=function(){return e.instance||(e.instance=new e(n.Utils.getLoaderParams())),e.instance._profile},e.prototype.buildProfile=function(e,t){var i=e.e.sc;i.s=n.Utils.mergeDeep(this.getDefaultStyling(),i.s);var o=n.Utils.getScreenSize();return{debugMode:!!e.debug&&e.debug,identity:{siteKey:e.i.sk,publisherKey:e.i.pk,userId:e.i.u,sessionId:e.i.s,pageviewId:e.i.pv,isBenchmarkPageview:e.r.b,bootstrapPageviewId:e.bpvi,supplyConfigId:e.i.sc,url:encodeURIComponent(location.protocol+"//"+location.host+location.pathname),timeOffset:e.to},yieldData:{isBenchmarked:e.r.b,countryCode:e.r.cc,trafficSource:e.r.ts,isReturningUser:e.r.ru,version:e.e.v,eventServerUrl:e.r.es,host:e.yhn},deviceDetails:{browser:e.dt.b,device:e.dt.d,deviceType:e.dt.p,os:e.dt.os,osVersion:e.dt.osv,screenWidth:o.w,screenHeight:o.h,browserType:e.dt.bt,deviceVendor:e.dt.v},userShort:e.e.us,referrer:encodeURIComponent(window.top.document.referrer),analysisMode:e.e.am,enableMoat:e.e.em,fixedHeader:e.e.fh,spotsConfig:i,adMarking:this.getAdMarkingConfiguration(e.e.sc.mrk),foldsConfiguration:this.getFoldConfiguration(e.e.fc),state:r.DesktopStates.BOOTSTRAP_LOADED,allowNarrowBreak:i.anb||!1,targetSelectors:e.e.ts||[],prebidPath:e.e.pp,adBlockerDetectionUrl:e.e.abd,rules:t}},e.buildMainContent=function(t,i,r,o){var s=o.e.mc.u,a={start:-1,width:-1,height:-1,widthThreshold:r,elements:[]};if(t.length){var d=null;o.e.mc.e&&(d=n.Utils.querySelector(o.e.mc.e,this.errorCallback));var l=this.collectMainContentElements(o.e.ts||[],t,d);e.logger.debug("all main content + targetSelector elements: ",l);var p=n.Utils.querySelector(s,this.errorCallback)||t[0],u=t[t.length-1],c=n.Utils.getElementCoordinates(p).top,f=d?n.Utils.getElementCoordinates(d).top:n.Utils.getElementCoordinates(u).top+u.getBoundingClientRect().height;a={start:c,width:i,height:Math.round(f-c),widthThreshold:r,elements:l}}return a},e.buildAdSizes=function(e,t,i,r){var o=this,s=[];return t.forEach(function(t){if(e>=t.w||n.Utils.isFluidSize(t)){var a=o.getAdSizeType(t);s.push({w:t.w,h:t.h,adSizeType:a,validHeight:o.calculateValidHeights(t.w,t.h,e),optionalEmbeddings:o.getEmbedTypes(a,t.h,i,r)})}}),s},e.getAdSizeType=function(e){return n.Utils.isFluidSize(e)?a.AdSizeType.WIDE:e.w<=this.maxNarrowAdWidth?a.AdSizeType.NARROW:a.AdSizeType.WIDE},e.getEmbedTypes=function(e,t,i,n){var r=[];return e==a.AdSizeType.NARROW?(t<=this.maxNarrowAdHeightForBreak&&i&&r.push(o.EmbedType.BREAK),n&&r.push(o.EmbedType.WRAPPED)):r.push(o.EmbedType.BREAK),r},e.calculateValidHeights=function(e,t,i){return t-t*e/i},e.getSkippedElements=function(e,t,i){return n.Utils.querySelectorAll(e,i).filter(function(e){return t.includes(e)||n.Utils.isDescendantElement(t,e)})},e.validateProfile=function(e){var t=[];return e.foldsConfiguration.start>e.foldsConfiguration.stop&&t.push("startIF/stopIF_Violation"),e.domData&&(0===e.domData.compatibleSizes.length&&t.push("No_compatibleSizes"),0===e.domData.mainContent.elements.length&&t.push("No_Elements_Under_MC")),t},e.prototype.getFoldConfiguration=function(e){return e.stop>0?e:{start:e.start,stop:1e6}},e.prototype.getAdMarkingConfiguration=function(e){if(e){var t={text:e.t};return e.c?t.color=e.c:e.s&&(t.customStyle=e.s),t}return null},e.collectMainContentElements=function(e,t,i){var r=n.Utils.getVisibleElements(e,t);return i&&n.Utils.isDescendantElement(t,i)&&(r=n.Utils.removeElementsPositionedAfter(i,r)),r},e.detectAdBlocker=function(t){e.adBlockerExists?t():new Promise(function(t,i){function n(){"undefined"===window.adblockDetector?t(!1):window.adblockDetector.init({debug:e.get().debugMode,found:function(){t(!0)},notFound:function(){t(!1)}})}var r=document.createElement("script");r.src=e.get().adBlockerDetectionUrl,r.onload=n,r.onerror=n,document.body.appendChild(r)}).then(function(i){e.adBlockerExists=i,e.logger.custom("Ad Blocker Detected: "+i,n.Utils.getLogStyle(18,"black","green")),t()})},e.collectDOMData=function(){var t=window._middyo,i=n.Utils.querySelectorAll([t.e.mc.s],e.errorCallback),r=this.getStayAwayElementsList(t.e.sa,i,e.errorCallback),o=this.getSkippedElements(t.e.se,i,e.errorCallback),s=this.getSkippedElements(["div[style*=float] + p, img[style*=float]+p, iframe[style*=float] + p"],i,e.errorCallback),a=this.getMainContentWidth(i),d=t.e.mc.t?t.e.mc.t:500,l=a>=d,p=t.e.sc.anb||!1,u=this.buildAdSizes(a,t.e.sc.cs||[],p,l);return{mainContent:this.buildMainContent(i,a,d,t),stayAwayElements:r,skippedElements:o,compatibleSizes:u,foundFloatElements:s,allowNarrowWrap:l}},e.getMainContentWidth=function(e){var t=e.length>0?e[0].getBoundingClientRect().width:-1;if(n.Utils.isElement(e[0])){var i=window.getComputedStyle(e[0]);i.paddingLeft&&i.paddingRight&&(t-=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight))}return t},e.getStayAwayElementsList=function(e,t,i){var r=[];return e&&e.forEach(function(e){var o=n.Utils.querySelectorAll([e.e],i);r=r.concat(o.filter(function(e){return n.Utils.isDescendantElement(t,e)}).map(function(t){return{element:t,distance:e.d}}))}),r},e.prototype.getDefaultStyling=function(){return{b:{m:{b:16,t:16}},l:{m:{t:-1,r:16,b:16,l:0},p:{t:-1,r:0,b:0,l:0}},r:{m:{t:-1,r:0,b:16,l:16},p:{t:-1,r:0,b:0,l:0}}}},e.logger=new s.Logger("Profiler"),e.errorCallback=function(t){return e.logger.error(t)},e.maxNarrowAdHeightForBreak=400,e.maxNarrowAdWidth=400,e}();t.Profiler=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(2),r=i(17),o=i(1),s=i(0),a=i(18),d=function(){function e(){this.commonFields=this.buildCommonFields(),this.commonLongFields=this.buildCommonLongFields(),this.eventServerUrl=n.Profiler.get().yieldData.eventServerUrl,this.useShort=n.Profiler.get().userShort,this.logger=new o.Logger("Events"),this.profile=n.Profiler.get()}return e.get=function(){return e._instance||(this._instance=new e),e._instance},e.prototype.sendEngineLoadedEvent=function(){var e=n.Profiler.get(),t=this.useShort?this.getEngineLoadedEvent(e):this.getEngineLoadedEventLong(e);this.send(a.EventTopic.SUPPLY,r.EventType.ENGINE_LOADED,t)},e.prototype.sendSpotFoundEvent=function(e){var t=this.useShort?this.getSpotFoundEvent(e):this.getSpotFoundEventLong(e);this.send(a.EventTopic.DEMAND,r.EventType.SPOT_FOUND,t)},e.prototype.sendPageviewEvent=function(e){var t=this.getErrorReason(),i=this.useShort?this.getPageviewEvent(e,t):this.getPageviewEventLong(e,t);this.send(a.EventTopic.SUPPLY,r.EventType.PAGE_VIEW,i)},e.prototype.sendAdBlockerEvent=function(){var e=this.useShort?this.getAdBlockerEvent():this.getAdBlockerEventLong();this.send(a.EventTopic.SUPPLY,r.EventType.AD_BLOCKER,e)},e.prototype.sendSpotEngineDoneEvent=function(){var e=n.Profiler.get(),t=this.useShort?this.getSpotEngineDoneEvent(e):this.getSpotEngineDoneEventLong(e);this.send(a.EventTopic.SUPPLY,r.EventType.SPOT_ENGINE_DONE,t)},e.prototype.sendAdRequest=function(e,t){var i=this.useShort?this.getAdRequestEvent(e,t):this.getAdRequestEventLong(e,t);this.send(a.EventTopic.DEMAND,r.EventType.AD_REQUEST,i)},e.prototype.sendAdMatchedEvent=function(e,t,i){var n=this.useShort?this.getAdMatchedEvent(e,t,i):this.getAdMatchedEventLong(e,t,i);this.send(a.EventTopic.DEMAND,r.EventType.AD_MATCHED,n)},e.prototype.sendAdImpression=function(e,t,i){var n=s.Utils.getSpotCoords(e),o=this.useShort?this.getAdImpressionEvent(n,e,t,i):this.getAdImpressionEventLong(n,e,t,i);this.send(a.EventTopic.DEMAND,r.EventType.AD_IMPRESSION,o)},e.prototype.sendViewedImpression=function(e){var t=s.Utils.getSpotCoords(e),i=this.useShort?this.getViewedImpressionEvent(t,e):this.getViewedImpressionEventLong(t,e);this.send(a.EventTopic.DEMAND,r.EventType.VIEWED_IMPRESSION,i)},e.prototype.getEngineLoadedEvent=function(e){return Object.assign({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:r.EventType.ENGINE_LOADED,to:this.getTimeOffset(),res:e.deviceDetails.screenWidth+"x"+e.deviceDetails.screenHeight})},e.prototype.getEngineLoadedEventLong=function(e){return Object.assign({},this.commonLongFields,{now:s.Utils.getCurrentTime(!0),event_type:r.EventType.ENGINE_LOADED,time_offset:this.getTimeOffset(),resolution:this.getResolution()})},e.prototype.getSpotFoundEvent=function(e){return Object.assign({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:r.EventType.SPOT_FOUND,adix:e.adIndex,f:s.Utils.getElementFoldNumber(e.ref),pt:"within_mc",ot:e.offsetTop,to:this.getTimeOffset(),dcs:!1,ill:!1,pw:s.Utils.getPageWidth()})},e.prototype.getSpotFoundEventLong=function(e){return Object.assign({},this.commonLongFields,{now:s.Utils.getCurrentTime(!0),event_type:r.EventType.SPOT_FOUND,ad_index:e.adIndex,fold:s.Utils.getElementFoldNumber(e.ref),position_type:"within_mc",offset_top:e.offsetTop,time_offset:this.getTimeOffset(),is_dcs:!1,is_lazy_loaded:!1,page_width:s.Utils.getPageWidth()})},e.prototype.getPageviewEvent=function(e,t){return Object.assign({},this.commonFields,t,{now:s.Utils.getCurrentTime(!0),et:r.EventType.PAGE_VIEW,bpvid:this.profile.identity.bootstrapPageviewId,sf:s.Utils.isEmptyObj(t)?e:-1,dcs:!1,ie:e>0,tlls:-1,pl:s.Utils.getPageHeight(),to:this.getTimeOffset(),res:this.profile.deviceDetails.screenWidth+"x"+this.profile.deviceDetails.screenHeight,scid:this.profile.identity.supplyConfigId,iru:this.profile.yieldData.isReturningUser,mcs:this.profile.domData?this.profile.domData.mainContent.start:-1,mcw:this.profile.domData?this.profile.domData.mainContent.width:-1,mch:this.profile.domData?this.profile.domData.mainContent.height:-1})},e.prototype.getPageviewEventLong=function(e,t){return Object.assign({},this.commonLongFields,t,{now:s.Utils.getCurrentTime(!0),event_type:r.EventType.PAGE_VIEW,bootstrap_page_view_id:this.profile.identity.bootstrapPageviewId,spots_found:s.Utils.isEmptyObj(t)?e:-1,is_dcs:!1,is_eligible:e>0,total_lazy_load_spots:-1,page_length:s.Utils.getPageHeight(),time_offset:this.getTimeOffset(),resolution:this.getResolution(),supply_config_id:this.profile.identity.supplyConfigId,is_returning_user:this.profile.yieldData.isReturningUser,main_content_start:this.profile.domData?this.profile.domData.mainContent.start:-1,main_content_width:this.profile.domData?this.profile.domData.mainContent.width:-1,main_content_height:this.profile.domData?this.profile.domData.mainContent.height:-1})},e.getFiredEvents=function(){return e.firedEvents},e.prototype.getAdBlockerEvent=function(){return Object.assign({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:r.EventType.AD_BLOCKER,to:this.getTimeOffset(),ex:n.Profiler.adBlockerExists})},e.prototype.getAdBlockerEventLong=function(){return Object.assign({},this.commonLongFields,{now:s.Utils.getCurrentTime(!0),event_type:r.EventType.AD_BLOCKER,time_offset:this.getTimeOffset(),exists:n.Profiler.adBlockerExists})},e.prototype.getSpotEngineDoneEvent=function(e){return Object.assign({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:r.EventType.SPOT_ENGINE_DONE,pl:s.Utils.getPageHeight(),to:this.getTimeOffset(),scid:e.identity.supplyConfigId,res:e.deviceDetails.screenWidth+"x"+e.deviceDetails.screenHeight})},e.prototype.getSpotEngineDoneEventLong=function(e){return Object.assign({},this.commonLongFields,{now:s.Utils.getCurrentTime(!0),event_type:r.EventType.SPOT_ENGINE_DONE,page_length:s.Utils.getPageHeight(),time_offset:this.getTimeOffset(),supply_config_id:e.identity.supplyConfigId,resolution:this.getResolution()})},e.prototype.getAdRequestEvent=function(e,t){return Object.assign({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:r.EventType.AD_REQUEST,adf:"display",adix:e.adIndex,au:e.adUnit,saas:e.isSaas,atix:e.attemptIndex,pr:t,f:this.getFold(e),ot:s.Utils.getSpotCoords(e).top,ill:!1,pw:s.Utils.getPageWidth(),rc:0,to:this.getTimeOffset()})},e.prototype.getAdRequestEventLong=function(e,t){return Object.assign({},this.commonLongFields,{now:s.Utils.getCurrentTime(!0),event_type:r.EventType.AD_REQUEST,ad_format:"display",ad_index:e.adIndex,ad_unit:e.adUnit,is_saas:e.isSaas,attempt_index:e.attemptIndex,provider:t,fold:this.getFold(e),offset_top:s.Utils.getSpotCoords(e).top,is_lazy_loaded:!1,page_width:s.Utils.getPageWidth(),refresh_count:0,time_offset:this.getTimeOffset()})},e.prototype.getAdMatchedEvent=function(e,t,i){return Object.assign({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:r.EventType.AD_MATCHED,adf:"display",adix:e.adIndex,au:e.adUnit,im:i,saas:e.isSaas,atix:e.attemptIndex,w:e.selectedSize?e.selectedSize.w:-1,h:e.selectedSize?e.selectedSize.h:-1,pr:t,emt:e.selectedSize&&e.selectedSize.selectedEmbedding?e.selectedSize.selectedEmbedding:"NA",ft:-1,ot:s.Utils.getSpotCoords(e).top,f:this.getFold(e),ill:!1,pw:s.Utils.getPageWidth(),rc:0,to:this.getTimeOffset()})},e.prototype.getAdMatchedEventLong=function(e,t,i){return Object.assign({},this.commonLongFields,{now:s.Utils.getCurrentTime(!0),event_type:r.EventType.AD_MATCHED,ad_format:"display",ad_index:e.adIndex,ad_unit:e.adUnit,is_matched:i,is_saas:e.isSaas,attempt_index:e.attemptIndex,width:e.selectedSize?e.selectedSize.w:-1,height:e.selectedSize?e.selectedSize.h:-1,provider:t,embed_type:e.selectedSize&&e.selectedSize.selectedEmbedding?e.selectedSize.selectedEmbedding:"NA",fetch_time:-1,offset_top:s.Utils.getSpotCoords(e).top,fold:this.getFold(e),is_lazy_loaded:!1,page_width:s.Utils.getPageWidth(),refresh_count:0,time_offset:this.getTimeOffset()})},e.prototype.getAdImpressionEvent=function(e,t,i,n){return Object.assign({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:r.EventType.AD_IMPRESSION,adf:"display",au:t.adUnit,h:t.browsiAd.h,w:t.browsiAd.w,adix:t.adIndex,saas:t.isSaas,emt:n,atix:t.attemptIndex,ol:e.left,ot:e.top,pr:i,f:this.getFold(t),ft:-1,ill:!1,dcs:!1,pw:s.Utils.getPageWidth(),rc:0,to:this.getTimeOffset()})},e.prototype.getAdImpressionEventLong=function(e,t,i,n){return Object.assign({},this.commonLongFields,{now:s.Utils.getCurrentTime(!0),event_type:r.EventType.AD_IMPRESSION,ad_format:"display",ad_unit:t.adUnit,height:t.browsiAd.h,width:t.browsiAd.w,ad_index:t.adIndex,is_saas:t.isSaas,embed_type:n,attempt_index:t.attemptIndex,offset_left:e.left,offset_top:e.top,provider:i,fold:this.getFold(t),fetch_time:-1,is_lazy_loaded:!1,is_dcs:!1,page_width:s.Utils.getPageWidth(),refresh_count:0,time_offset:this.getTimeOffset()})},e.prototype.getViewedImpressionEvent=function(e,t){return Object.assign({},this.commonFields,{now:s.Utils.getCurrentTime(!0),et:r.EventType.VIEWED_IMPRESSION,adf:"display",adix:t.adIndex,au:t.adUnit,saas:t.isSaas,h:t.browsiAd.h,w:t.browsiAd.w,emt:t.selectedSize&&t.selectedSize.selectedEmbedding?t.selectedSize.selectedEmbedding:"NA",ol:e.left,ot:e.top,atix:t.attemptIndex,c:1,pr:t.providerName,f:this.getFold(t),ft:-1,to:this.getTimeOffset(),pw:s.Utils.getPageWidth(),rc:0,tiv:-1,piv:-1,dcs:!1,ill:!1})},e.prototype.getViewedImpressionEventLong=function(e,t){return Object.assign({},this.commonLongFields,{now:s.Utils.getCurrentTime(!0),event_type:r.EventType.VIEWED_IMPRESSION,ad_format:"display",ad_index:t.adIndex,ad_unit:t.adUnit,is_saas:t.isSaas,height:t.browsiAd.h,width:t.browsiAd.w,embed_type:t.selectedSize&&t.selectedSize.selectedEmbedding?t.selectedSize.selectedEmbedding:"NA",offset_left:e.left,offset_top:e.top,attempt_index:t.attemptIndex,counter:1,provider:t.providerName,fold:this.getFold(t),fetch_time:-1,time_offset:this.getTimeOffset(),page_width:s.Utils.getPageWidth(),refresh_count:0,time_in_view:-1,percentage_in_view:-1,is_dcs:!1,is_lazy_loaded:!1})},e.prototype.send=function(t,i,n){var r=new XMLHttpRequest;r.open("POST",""+this.eventServerUrl+t+"?p="+this.commonFields.pvid,!0),r.send(JSON.stringify([n])),e.addToFiredEvents(t,i,n),this.logger.custom(t+"/"+i,"background: #AAFF7F; color: black; font-weight: bold; text-decoration:underline; font-size: 18px;",n)},e.addToFiredEvents=function(t,i,n){e.firedEvents.has(t)||e.firedEvents.set(t,new Map);var r=e.firedEvents.get(t);r&&!r.has(i)&&r.set(i,[]);var o=r&&r.get(i);o&&o.push(n)},e.prototype.buildCommonFields=function(){var e=n.Profiler.get();return{sk:e.identity.siteKey,pk:e.identity.publisherKey,uid:e.identity.userId,sid:e.identity.sessionId,pvid:e.identity.pageviewId,geo:e.yieldData.countryCode,r:e.referrer,bpvid:e.identity.bootstrapPageviewId,url:e.identity.url,dos:e.deviceDetails.os,dosv:e.deviceDetails.osVersion,dv:e.deviceDetails.deviceVendor,dbt:e.deviceDetails.browserType,iru:e.yieldData.isReturningUser,ibpv:e.identity.isBenchmarkPageview,ts:e.yieldData.trafficSource,db:e.deviceDetails.browser,d:e.deviceDetails.device,dp:e.deviceDetails.deviceType,mv:e.yieldData.version,scid:e.identity.supplyConfigId}},e.prototype.buildCommonLongFields=function(){var e=n.Profiler.get();return{site_key:e.identity.siteKey,publisher_key:e.identity.publisherKey,user_id:e.identity.userId,session_id:e.identity.sessionId,page_view_id:e.identity.pageviewId,geo_location:e.yieldData.countryCode,referrer:e.referrer,bootstrap_page_view_id:e.identity.bootstrapPageviewId,url:e.identity.url,os:e.deviceDetails.os,os_version:e.deviceDetails.osVersion,device_vendor:e.deviceDetails.deviceVendor,browser_type:e.deviceDetails.browserType,is_returning_user:e.yieldData.isReturningUser,is_benchmark_pageview:e.identity.isBenchmarkPageview,traffic_source:e.yieldData.trafficSource,browser:e.deviceDetails.browser,device:e.deviceDetails.device,device_type:e.deviceDetails.deviceType,middy_version:e.yieldData.version,supply_config_id:e.identity.supplyConfigId}},e.prototype.getErrorReason=function(){var e=n.Profiler.validateProfile(n.Profiler.get());return e.length>0?{reason:e.join(";")}:{}},e.prototype.getTimeOffset=function(){return s.Utils.getCurrentTime(!1)-this.profile.identity.timeOffset},e.prototype.getResolution=function(){return this.profile.deviceDetails.screenWidth+"x"+this.profile.deviceDetails.screenHeight},e.prototype.getFold=function(e){return e.isImpression&&e.browsiAd.container?e.browsiAd.iframe?s.Utils.getElementFoldNumber(e.browsiAd.iframe):s.Utils.getElementFoldNumber(e.browsiAd.container):s.Utils.getElementFoldNumber(e.ref)},e.firedEvents=new Map,e}();t.EventsService=d},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.WRAPPED="wrapped",e.WRAPPED_LEFT="left",e.WRAPPED_RIGHT="right",e.BREAK="break",e.RANDOM="random"}(t.EmbedType||(t.EmbedType={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ERROR="error",e.SUCCESS="success",e.FAILURE="failure",e.TIMEOUT="timeout",e.NO_URL="no_url"}(t.CallbackType||(t.CallbackType={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ERROR="error",e.DONE="done",e.BOOTSTRAP_LOADED="bootstrap_loaded"}(t.DesktopStates||(t.DesktopStates={}))},function(e,t,i){(function(e,n){var r=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(a(arguments[i]));return t.join(" ")}i=1;for(var n=arguments,o=n.length,s=String(e).replace(r,function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return e}}),d=n[i];i<o;d=n[++i])h(d)||!w(d)?s+=" "+d:s+=" "+a(d);return s},t.deprecate=function(i,r){if(v(e.process))return function(){return t.deprecate(i,r).apply(this,arguments)};if(!0===n.noDeprecation)return i;var o=!1;return function(){if(!o){if(n.throwDeprecation)throw new Error(r);n.traceDeprecation?console.trace(r):console.error(r),o=!0}return i.apply(this,arguments)}};var o,s={};function a(e,i){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(i)?n.showHidden=i:i&&t._extend(n,i),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=d),p(n,e,n.depth)}function d(e,t){var i=a.styles[t];return i?"["+a.colors[i][0]+"m"+e+"["+a.colors[i][1]+"m":e}function l(e,t){return e}function p(e,i,n){if(e.customInspect&&i&&_(i.inspect)&&i.inspect!==t.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,e);return y(r)||(r=p(e,r,n)),r}var o=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(y(t)){var i="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}if(m(t))return e.stylize(""+t,"number");if(g(t))return e.stylize(""+t,"boolean");if(h(t))return e.stylize("null","null")}(e,i);if(o)return o;var s=Object.keys(i),a=function(e){var t={};return e.forEach(function(e,i){t[e]=!0}),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(i)),S(i)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return u(i);if(0===s.length){if(_(i)){var d=i.name?": "+i.name:"";return e.stylize("[Function"+d+"]","special")}if(b(i))return e.stylize(RegExp.prototype.toString.call(i),"regexp");if(E(i))return e.stylize(Date.prototype.toString.call(i),"date");if(S(i))return u(i)}var l,w="",A=!1,I=["{","}"];(f(i)&&(A=!0,I=["[","]"]),_(i))&&(w=" [Function"+(i.name?": "+i.name:"")+"]");return b(i)&&(w=" "+RegExp.prototype.toString.call(i)),E(i)&&(w=" "+Date.prototype.toUTCString.call(i)),S(i)&&(w=" "+u(i)),0!==s.length||A&&0!=i.length?n<0?b(i)?e.stylize(RegExp.prototype.toString.call(i),"regexp"):e.stylize("[Object]","special"):(e.seen.push(i),l=A?function(e,t,i,n,r){for(var o=[],s=0,a=t.length;s<a;++s)D(t,String(s))?o.push(c(e,t,i,n,String(s),!0)):o.push("");return r.forEach(function(r){r.match(/^\d+$/)||o.push(c(e,t,i,n,r,!0))}),o}(e,i,n,a,s):s.map(function(t){return c(e,i,n,a,t,A)}),e.seen.pop(),function(e,t,i){if(e.reduce(function(e,t){return 0,t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1];return i[0]+t+" "+e.join(", ")+" "+i[1]}(l,w,I)):I[0]+w+I[1]}function u(e){return"["+Error.prototype.toString.call(e)+"]"}function c(e,t,i,n,r,o){var s,a,d;if((d=Object.getOwnPropertyDescriptor(t,r)||{value:t[r]}).get?a=d.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):d.set&&(a=e.stylize("[Setter]","special")),D(n,r)||(s="["+r+"]"),a||(e.seen.indexOf(d.value)<0?(a=h(i)?p(e,d.value,null):p(e,d.value,i-1)).indexOf("\n")>-1&&(a=o?a.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+a.split("\n").map(function(e){return"   "+e}).join("\n")):a=e.stylize("[Circular]","special")),v(s)){if(o&&r.match(/^\d+$/))return a;(s=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+a}function f(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function h(e){return null===e}function m(e){return"number"==typeof e}function y(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return w(e)&&"[object RegExp]"===A(e)}function w(e){return"object"==typeof e&&null!==e}function E(e){return w(e)&&"[object Date]"===A(e)}function S(e){return w(e)&&("[object Error]"===A(e)||e instanceof Error)}function _(e){return"function"==typeof e}function A(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(e){if(v(o)&&(o=n.env.NODE_DEBUG||""),e=e.toUpperCase(),!s[e])if(new RegExp("\\b"+e+"\\b","i").test(o)){var i=n.pid;s[e]=function(){var n=t.format.apply(t,arguments);console.error("%s %d: %s",e,i,n)}}else s[e]=function(){};return s[e]},t.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=g,t.isNull=h,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=w,t.isDate=E,t.isError=S,t.isFunction=_,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=i(14);var T=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){var e,i;console.log("%s - %s",(e=new Date,i=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":"),[e.getDate(),T[e.getMonth()],i].join(" ")),t.format.apply(t,arguments))},t.inherits=i(15),t._extend=function(e,t){if(!t||!w(t))return e;for(var i=Object.keys(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e}}).call(t,i(12),i(13))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.NARROW="narrow",e.WIDE="wide"}(t.AdSizeType||(t.AdSizeType={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(27),s=i(5),a=i(2),d=i(4),l=function(){function e(e,t){this.spot=e,this.providerName=t,this.hasFluidSizeSupport=!1}return e.prototype.embedAdRequestIframe=function(e,t){if(e.ref&&e.ref.parentNode){var i=document.createElement("iframe");i.id=e.getDomId(),i.scrolling="no",i.frameBorder="0",i.marginHeight="0",i.marginWidth="0",i.height="0",i.width="0",i.style.display="none",e.ref.parentNode.insertBefore(i,e.ref),n.Utils.onIframeLoad(i,function(){var n=document.createElement("div");n.setAttribute("id",i.id),i.contentDocument.open(),i.contentDocument.close(),i.contentDocument.body.appendChild(n),e.browsiAd.wrapper=i,t(i)})}},e.prototype.removeAdFromDom=function(e){if(e.browsiAd.wrapper){var t=document.querySelector("#"+e.browsiAd.wrapper.id);if(!(t&&document.body.contains(t)&&t.parentNode))return!1;if(this.removeAdMarkingFromDom(e),!e.tableConfiguration)return t.parentNode.removeChild(t),!0;var i=t.parentElement;if(i&&i.parentNode)return i.parentNode.removeChild(i),!0}return!1},e.prototype.removeAdMarkingFromDom=function(e){return!(!e.browsiAd.admarking||!e.browsiAd.admarking.parentNode)&&(e.browsiAd.admarking.parentNode.removeChild(e.browsiAd.admarking),delete e.browsiAd.admarking,!0)},e.prototype.expendAd=function(e,t){var i=this;this.spot.expend(e).then(function(l){i.spot.isImpression=!0;var p=a.Profiler.get().adMarking;if(p&&i.spot.browsiAd.wrapper&&i.spot.selectedSize&&i.spot.selectedSize.selectedEmbedding===d.EmbedType.BREAK&&!i.spot.browsiAd.admarking){var u=n.Utils.buildAdMarking(i.spot,p);i.spot.browsiAd.wrapper.insertBefore(u,i.spot.browsiAd.wrapper.firstChild),i.spot.browsiAd.admarking=u}r.EventsService.get().sendAdImpression(i.spot,i.providerName,e.selectedEmbedding),i.logger.info("["+l.w+"X"+l.h+"] "+i.providerName+" ad created: ",i.spot.browsiAd.wrapper),o.ViewabilityService.get().subscribe(i.spot),t(s.CallbackType.SUCCESS)})},e.prototype.buildSizesArray=function(){var e=this;return this.spot.compatibleSizes.filter(function(t){return e.hasFluidSizeSupport||!e.hasFluidSizeSupport&&!n.Utils.isFluidSize(t)}).map(function(t){return e.hasFluidSizeSupport&&n.Utils.isFluidSize(t)?["fluid"]:[t.w,t.h]})},e}();t.Provider=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.wrapperId="browsi_adWrapper_ai_"+e.adIndex+"_ati_"+(e.attemptIndex?e.attemptIndex:1),this.containerId="browsi_adContainer_ai_"+e.adIndex+"_ati_"+(e.attemptIndex?e.attemptIndex:1),e.setDomId(this.wrapperId)}return e.prototype.appendAd=function(e,t){if(e.ref.parentNode){if(e.tableConfiguration){var i=e.tableConfiguration.mainTd.cloneNode();return i.appendChild(t),e.ref.parentNode.insertBefore(i,e.ref),!0}return e.ref.parentNode.insertBefore(t,e.ref),!0}return!1},e}();t.Embedder=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(6),r=i(3),o=i(1),s=i(19),a=i(23),d=i(2),l=i(0),p=i(24);i(37);var u=function(){function e(){this.logger=new o.Logger("App.ts"),this.profile=d.Profiler.get(),this.logger.info("profile: ",this.profile),this.runPreStartRule(),d.Profiler.detectAdBlocker(function(){return r.EventsService.get().sendAdBlockerEvent()})}return e.prototype.runPreStartRule=function(){if(this.profile.rules&&this.profile.rules.preStart)try{this.logger.info("executing preStart"),this.profile.rules.preStart(l.Utils.getLoaderParams())}catch(e){this.logger.error("failed to execute preStart",e)}},e.prototype.run=function(){this.logger.info("started"),this.profile.domData=d.Profiler.collectDOMData();var e=d.Profiler.validateProfile(this.profile);if(e.length)this.profile.state=n.DesktopStates.ERROR,this.logger.warn("An invalid profile",e),r.EventsService.get().sendPageviewEvent(0);else{var t=(new s.default).findSpots(),i=this.profile.analysisMode;this.logger.custom("Spots found: "+t.length,l.Utils.getLogStyle(18,"black","green"),t),t.length&&(i?this.logger.custom("AnalysisMode ON",l.Utils.getLogStyle(18,"red","#000")):p.YieldClient.get().processSpots(t))}l.Utils.buildBrowsiOutput(this.profile)},e}();function c(){if((document.readyState===a.DocumentState.INTERACTIVE||document.readyState===a.DocumentState.COMPLETE)&&!window._middyo.loaded){window._middyo.loaded=!0;var e=l.Utils.getLoaderParams().e.t,t=new u;e?(t.logger.info("waiting "+e+"mc"),setTimeout(function(){t.run()},e)):t.run()}}r.EventsService.get().sendEngineLoadedEvent(),window.top.document.onreadystatechange=function(){return c()},window.top.document.addEventListener("readystatechange",function(){return c()}),c()},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t){var i,n,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(i===setTimeout)return setTimeout(e,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(e){i=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(e){n=s}}();var d,l=[],p=!1,u=-1;function c(){p&&d&&(p=!1,d.length?l=d.concat(l):u=-1,l.length&&f())}function f(){if(!p){var e=a(c);p=!0;for(var t=l.length;t;){for(d=l,l=[];++u<t;)d&&d[u].run();u=-1,t=l.length}d=null,p=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function g(e,t){this.fun=e,this.array=t}function h(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new g(e,t)),1!==l.length||p||a(f)},g.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=h,r.addListener=h,r.once=h,r.off=h,r.removeListener=h,r.removeAllListeners=h,r.emit=h,r.prependListener=h,r.prependOnceListener=h,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=i(2),s=function(){function e(){var e=this;this.observer=null,this.noneFixedHeight=0,this.fixedHeight=0,this.isFixedHeader=!1;var t=o.Profiler.get().fixedHeader;if(this.logger=new n.Logger("FixedHeader"),t){var i=t.s,r=document.querySelector(i);r&&(this.updateProperties(r),this.noneFixedHeight=t.h,this.observer=new MutationObserver(function(t){e.updateProperties(r)}),this.observer.observe(r,{attributes:!0}),this.logger.info("found header, watching ",r,t))}}return e.prototype.updateProperties=function(e){var t=this.isHeaderFixed(e);this.isFixedHeader!==t&&this.logger.debug("header fixed: "+t),this.isFixedHeader=t,this.fixedHeight=this.isFixedHeader?r.Utils.getElementSize(e).h:0},e.get=function(){return e._instance||(this._instance=new e),e._instance},e.prototype.getFixedHeaderSize=function(){return this.fixedHeight},e.prototype.getNoneFixedHeaderSize=function(){return this.isFixedHeader?this.noneFixedHeight:0},e.prototype.isHeaderFixed=function(e){return e&&r.Utils.isPositionFixed(e)},e}();t.FixedHeaderService=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SPOT_FOUND="spot_found",e.AD_REQUEST="ad_request",e.AD_MATCHED="ad_matched",e.AD_IMPRESSION="ad_impression",e.VIEWED_IMPRESSION="viewed_impression",e.ENGINE_LOADED="engine_loaded",e.PAGE_VIEW="page_view",e.SPOT_ENGINE_DONE="spot_engine_done",e.AD_BLOCKER="ad_blocker"}(t.EventType||(t.EventType={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.DEMAND="demand",e.SUPPLY="supply",e.PAGE_STRUCTURE="pagestructure",e.ENGAGEMENT="engagement"}(t.EventTopic||(t.EventTopic={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(20),o=i(1),s=i(6),a=i(3),d=i(4),l=i(21),p=i(22),u=i(2),c=function(){function e(){this.WRAPPABLE=["p"],this.logger=new o.Logger("SpotEngine"),this.profile=u.Profiler.get(),this.availableSpots=[],this.lastScannedElement=null,this.firstScannedElement=null,this.isMenuPositionFixed=!1,this.spotsStrategy=new p.DefautlSpotsStrategy,this.profile.debugMode&&(this.profile.spotEngineTest={})}return e.prototype.findSpots=function(){return this.availableSpots=this.scanAvailableSpots(),a.EventsService.get().sendPageviewEvent(this.availableSpots.length),this.profile.state=s.DesktopStates.DONE,a.EventsService.get().sendSpotEngineDoneEvent(),this.profile.debugMode&&this.buildSpotEngineTest(),this.availableSpots},e.prototype.scanAvailableSpots=function(){var e=[];if(!this.profile.domData)return e;for(var t=0,i=this.profile.domData.mainContent.elements;t<i.length;t++){var o=i[t];if(this.spotsStrategy.stopScanning(e)){this.lastScannedElement=o.previousElementSibling;break}if(this.isBelowStopInFold(o)){this.lastScannedElement=o.previousElementSibling,this.logger.debug("SpotEngine Stopped. StopIF = "+this.profile.foldsConfiguration.stop+", reached element at fold "+n.Utils.getElementFoldNumber(o)+": ",o);break}if(this.validateSpot(o).status!==l.SpotStatus.INVALID){var s=this.getNextParagraphsTotalHeight(o),a=this.getCompatibleAdsSizes(o,s);if(this.validateStayAway(o,e).status!==l.SpotStatus.INVALID)if(a.length>0){var d=new r.Spot(o,e.length,a,s);this.logger.info("New spot found: ",d.ref),e.push(d)}else this.logger.debug("invalid spot [no compatible size found]:",o)}}return this.logger.info("Spots found before filtering: ",e),this.spotsStrategy.selectSpots(e)},e.prototype.isSkippedElement=function(e){return this.profile.domData&&this.profile.domData.skippedElements.some(function(t){return t===e||n.Utils.isDescendantElement([t],e)})?{status:l.SpotStatus.INVALID,message:"skipped element"}:{status:l.SpotStatus.VALID}},e.prototype.isStayAwayElement=function(e){var t=this.profile.domData&&this.profile.domData.stayAwayElements;if(t&&t.length>0){var i=t.find(function(t){var i=n.Utils.calculateDistanceBetween(e,t.element)<=t.distance;return n.Utils.isElement(t.element)&&i});return i&&i.element?{status:l.SpotStatus.INVALID,message:"stay away violation",element:i.element}:{status:l.SpotStatus.VALID}}return{status:l.SpotStatus.VALID}},e.prototype.isBrowsiStayAway=function(e,t){var i=this;return t.length>0&&this.profile.foldsConfiguration&&t.some(function(t){var r=t.compatibleSizes.findIndex(function(e){return e.optionalEmbeddings.includes(d.EmbedType.WRAPPED)})>-1?Math.max.apply(Math,t.compatibleSizes.map(function(e){return e.h}).sort(function(e,t){return e-t})):0;return n.Utils.calculateDistanceBetween(e,t.ref)-(r-t.ref.getBoundingClientRect().height)<=i.profile.spotsConfig.d})?{status:l.SpotStatus.INVALID,message:"stay away from browsi"}:{status:l.SpotStatus.VALID}},e.prototype.isAboveStartInFold=function(e){var t=n.Utils.getElementFoldNumber(e);return this.profile.foldsConfiguration&&t<this.profile.foldsConfiguration.start?{status:l.SpotStatus.INVALID,message:"above startIF("+t+")"}:(this.firstScannedElement||(this.firstScannedElement=e),{status:l.SpotStatus.VALID})},e.prototype.isBelowStopInFold=function(e){var t=n.Utils.getElementFoldNumber(e);if(this.profile.foldsConfiguration)if(this.profile.foldsConfiguration.stop===Math.floor(this.profile.foldsConfiguration.stop)){if(Math.floor(t)>this.profile.foldsConfiguration.stop)return!0}else if(t>this.profile.foldsConfiguration.stop)return!0;return!1},e.prototype.getNextParagraphsTotalHeight=function(e){for(var t=0,i=!1;e&&!i&&this.isSkippedElement(e).status===l.SpotStatus.VALID&&this.isStayAwayElement(e).status===l.SpotStatus.VALID;)switch(!n.Utils.isVisible(e)&&t>0&&e.nextElementSibling&&(e=e.nextElementSibling),e.nodeName){case"BR":e.nextElementSibling?e=e.nextElementSibling:i=!0;break;case"P":if(e.querySelector("img"))i=!0;else if(n.Utils.isEmptyParagraph(e)){if(!e.nextElementSibling)return t;e=e.nextElementSibling}else t+=e.getBoundingClientRect().height,e.nextElementSibling?e=e.nextElementSibling:i=!0;break;default:i=!0}return t},e.prototype.getCompatibleAdsSizes=function(e,t){var i=this,n=[];if(!this.profile.domData)return n;for(var r=JSON.parse(JSON.stringify(this.profile.domData.compatibleSizes)).filter(function(t){return!i.isCompSizeBiggerThanParentSize(t,e)}),o=e.getBoundingClientRect().height,s=0,a=r;s<a.length;s++){var l=a[s],p=l.optionalEmbeddings.indexOf(d.EmbedType.WRAPPED);p>-1&&(this.isSizeValidForWrapping(t,o,l)||l.optionalEmbeddings.splice(p,1)),l.optionalEmbeddings.length&&n.push(l)}return n},e.prototype.isSizeValidForWrapping=function(e,t,i){return t>=i.validHeight&&e>0||e>=i.validHeight},e.prototype.buildSpotEngineTest=function(){if(this.lastScannedElement&&this.firstScannedElement){var e=n.Utils.getElementFoldNumber(this.lastScannedElement),t=n.Utils.getElementFoldNumber(this.firstScannedElement);this.profile.spotEngineTest={firstElementFold:t,lastElementFold:e,spots:this.availableSpots}}else this.profile.spotEngineTest={spots:this.availableSpots}},e.prototype.validateSpot=function(e){var t=this.isAboveStartInFold(e).message||this.isEmptyParagraph(e).message||this.isSkippedElement(e).message||this.isElementWithFloatSibling(e).message,i=t?{status:l.SpotStatus.INVALID,message:t}:{status:l.SpotStatus.VALID};return i.status===l.SpotStatus.INVALID&&this.logger.debug("invalid spot ["+i.message+"]:",e),i},e.prototype.isEmptyParagraph=function(e){return n.Utils.isEmptyParagraph(e)?{status:l.SpotStatus.INVALID,message:"empty"}:{status:l.SpotStatus.VALID}},e.prototype.isCompSizeBiggerThanParentSize=function(e,t){var i=!1;if(t.parentElement){var r=n.Utils.getElementSize(t.parentElement);r&&e.w>r.w&&(i=!0)}return i},e.prototype.validateStayAway=function(e,t){var i=this.isStayAwayElement(e),n=i.message?null:this.isBrowsiStayAway(e,t).message,r=i.message||n,o=r?{status:l.SpotStatus.INVALID,message:r}:{status:l.SpotStatus.VALID};return o.status===l.SpotStatus.INVALID&&(i.message?this.logger.debug("invalid spot ["+o.message,{element:e,stayAwayElement:i.element}):this.logger.debug("invalid spot ["+o.message+"]:",e)),o},e.prototype.isElementWithFloatSibling=function(e){return this.profile.domData&&this.profile.domData.foundFloatElements.includes(e)?{status:l.SpotStatus.INVALID,message:"element with float sibling"}:{status:l.SpotStatus.VALID}},e}();t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(0),r=i(4),o=i(1),s=i(2),a=function(){function e(e,t,i,r){this.ref=e,this.adIndex=t,this.attemptIndex=1,this.isSaas=!1,this.compatibleSizes=i,this.availableHeight=r,this.offsetTop=n.Utils.getElementCoordinates(e).top,this.viewability={viewed:!1,duration:-1},this.browsiAd={h:-1,w:-1},this.isImpression=!1,this.logger=new o.Logger("Spot");var s=this.getTableIfExists();if(s){var a=document.createElement("tr"),d=document.createElement("td");d.setAttribute("colspan",100..toString()),d.setAttribute("style","width: 100%; display: none;"),a.appendChild(d),this.tableConfiguration={table:s,columns:100,adWrapper:a,mainTd:d}}}return e.prototype.expend=function(e){var t=this;return new Promise(function(i,r){if(t.browsiAd.wrapper){var o=n.Utils.isFluidSize(e),s=document.querySelector("#"+t.browsiAd.wrapper.id);if(s){var a=t.tableConfiguration&&s&&s.parentElement?s.parentElement:null;s.setAttribute("height",""+(o?"auto":e.h)),s.setAttribute("width",""+(o?"100%":e.w)),s.setAttribute("style",t.getEmbeddingStyle(e)),a&&a.setAttribute("style","width: 100%;"),t.browsiAd.iframe&&t.browsiAd.iframe.setAttribute("style","text-align:center;display: block;margin: auto;width: "+e.w+"px !important; height: "+e.h+"px !important;");var d=n.Utils.getElementCoordinates(s);o?setTimeout(function(){var e=s.getBoundingClientRect();t.browsiAd.w=e.width,t.browsiAd.h=e.height,t.browsiAd=n.Utils.merge(t.browsiAd,{offsetTop:d.top,offsetLeft:d.left}),i({w:t.browsiAd.w,h:t.browsiAd.h})},800):(t.browsiAd=n.Utils.merge(t.browsiAd,{offsetTop:d.top,offsetLeft:d.left}),i({w:t.browsiAd.w,h:t.browsiAd.h}))}}else r({w:-1,h:-1})})},e.prototype.getDomId=function(){return this.domId||"e"},e.prototype.setDomId=function(e){this.domId=e},e.prototype.getEmbeddingStyle=function(e){var t="";return e.selectedEmbedding?t=this.buildStyle(e,s.Profiler.get().spotsConfig.s):this.logger.error("no embedding for spot "+this.adIndex,this.browsiAd.wrapper),t},e.prototype.buildStyle=function(e,t){var i="";if(e.selectedEmbedding===r.EmbedType.BREAK){var o=n.Utils.isFluidSize(e);i="text-align:center;display:block;clear: both !important;"+(d="margin: auto;margin-top:"+t.b.m.t+"px !important;margin-bottom:"+t.b.m.b+"px !important")+";width:"+(o?"100%":"auto")+" !important; height: auto !important;"}else{var s=e.selectedEmbedding===r.EmbedType.WRAPPED_LEFT?t.l:t.r,a=getComputedStyle(this.ref),d="margin-top:"+(-1===s.m.t?parseInt(a.marginTop||"0"):s.m.t)+"px !important;\n                             margin-right:"+s.m.r+"px !important;\n                             margin-bottom:"+s.m.b+"px !important;\n                             margin-left:"+s.m.l+"px !important",l="padding-top:"+(-1===s.p.t?parseInt(a.paddingTop||"0"):s.p.t)+"px !important;\n                             padding-right:"+s.p.r+"px !important;\n                             padding-bottom:"+s.p.b+"px !important;\n                             padding-left:"+s.p.l+"px !important";i="text-align:center;float:"+e.selectedEmbedding+";position:relative;"+n.Utils.removeSpaces(d)+";"+n.Utils.removeSpaces(l)+";width:"+e.w+"px !important; height:"+e.h+"px !important;"}return i},e.prototype.getTableIfExists=function(){return this.ref?n.Utils.findParentElementByType("table",this.ref):null},e}();t.Spot=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.VALID="valid",e.INVALID="invalid"}(t.SpotStatus||(t.SpotStatus={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(4),o=i(2),s=i(8),a=i(3),d=i(0),l=function(){function e(){this.logger=new n.Logger("SpotsStrategy"),this.profile=o.Profiler.get(),this.logger.custom("spots strategy: default, allow narrow ads to break: "+this.profile.allowNarrowBreak,d.Utils.getLogStyle(18,"black","green"))}return e.prototype.stopScanning=function(e){return this.profile.spotsConfig.ms===this.filterSpotsBy(e,s.AdSizeType.NARROW,r.EmbedType.WRAPPED,!1).length},e.prototype.selectSpots=function(e){var t=this,i=this.profile.spotsConfig.ms,n=[],o=[],l=this.filterSpotsBy(e,s.AdSizeType.NARROW,r.EmbedType.WRAPPED,!0,i);this.logger.debug("selected narrow spots with wrap: ",l),(i-=l.length)>0&&(n=this.filterSpotsBy(e,s.AdSizeType.NARROW,r.EmbedType.BREAK,!0,i,l),this.logger.debug("selected narrow spots with break: ",n),i-=n.length),i>0&&(o=this.filterSpotsBy(e,s.AdSizeType.WIDE,r.EmbedType.BREAK,!0,i,l.concat(n)),this.logger.debug("selected wide spots with break: ",o));var p=d.Utils.sortByOffsetTop.apply(d.Utils,l.concat(n,o)).slice(0,this.profile.spotsConfig.ms);return p.forEach(function(e,t){return e.adIndex=t}),(p=this.assignWrappingDirection(p)).forEach(function(e){a.EventsService.get().sendSpotFoundEvent(e),t.logger.info("Found spot",e.ref)}),p},e.prototype.selectEmbeddings=function(e){return e.forEach(function(e){e.compatibleSizes.forEach(function(e){e.selectedEmbedding=e.optionalEmbeddings.includes(r.EmbedType.WRAPPED)?r.EmbedType.WRAPPED:r.EmbedType.BREAK})}),e},e.prototype.filterSpotsBy=function(e,t,i,n,r,o){var s=e.filter(function(e){return(!o||!o.includes(e))&&e.compatibleSizes.filter(function(e){return e.adSizeType===t&&e.optionalEmbeddings.includes(i)}).length>0});return r&&Number.isInteger(r)&&r<s.length&&(s=s.slice(0,r)),n&&(s=this.selectEmbeddings(s)),s},e.prototype.getWrapType=function(){return this.profile.spotsConfig.et===r.EmbedType.RANDOM?Math.random()>.5?r.EmbedType.WRAPPED_LEFT:r.EmbedType.WRAPPED_RIGHT:this.profile.spotsConfig.et},e.prototype.assignWrappingDirection=function(e){var t=this;return e.forEach(function(e){e.compatibleSizes.forEach(function(e){e.selectedEmbedding===r.EmbedType.WRAPPED&&(e.selectedEmbedding=t.getWrapType())})}),e},e}();t.DefautlSpotsStrategy=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COMPLETE="complete",e.INTERACTIVE="interactive"}(t.DocumentState||(t.DocumentState={}))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(2),o=i(0),s=i(25),a=i(5),d=i(30),l=i(33),p=function(){function e(){this.logger=new n.Logger("YieldClient")}return e.get=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.processSpots=function(e){var t=this;e.forEach(function(e){var i=t.createGetDemandScriptTag(e,t.getDemandCallback.bind(t));window.top.document.body.appendChild(i)})},e.prototype.processSingleSpot=function(e){this.logger.info("attemptIndex",e.attemptIndex);var t=this.createGetDemandScriptTag(e,this.getDemandCallback.bind(this));window.top.document.body.appendChild(t)},e.prototype.createGetDemandScriptTag=function(e,t){var i="__b_gdc_ad_"+e.adIndex;window.top[i]=function(i){return t(i,e)};var n=document.createElement("script");return n.async=!0,n.src=this.buildGetDemandUrl(e,i),n},e.prototype.buildGetDemandUrl=function(e,t){var i=r.Profiler.get();this.logger.info("AttemptIndex: ",e.attemptIndex);var n={sk:i.identity.siteKey,pvId:i.identity.pageviewId,atI:e.attemptIndex,sId:i.identity.sessionId,uId:i.identity.userId,u:document.location.href,f:o.Utils.getElementFoldNumber(e.ref),ai:e.adIndex,c:t};return"//"+i.yieldData.host+"/v2/demand?"+o.Utils.toUrlParams(n)},e.prototype.getDemandCallback=function(e,t){var i=this;if("empty"===e.rt)this.logger.info("getDemand returned empty, waterfall ended for spot "+t.adIndex);else{this.logger.info("getDemand returned ["+e.ti+"] for spot "+t.adIndex+", attempt "+t.attemptIndex),t.adUnit=e.au,t.isSaas=e.s;var n=d.EmbeddingFactory.getEmbedder(e,t),o=s.ProviderFactory.getProvider(e,t);o&&n?(this.runPreFetch(t,e,o),o.fetch(e,n).then(function(e){switch(e){case a.CallbackType.FAILURE:case a.CallbackType.TIMEOUT:i.nextWaterfallStep(t);break;case a.CallbackType.SUCCESS:i.logger.info("SUCCESS"),r.Profiler.get().enableMoat&&l.MoatService.get().injectMoat(t)}})):this.nextWaterfallStep(t)}},e.prototype.nextWaterfallStep=function(e){e.attemptIndex++,this.processSingleSpot(e)},e.prototype.runPreFetch=function(e,t,i){var n=r.Profiler.get().rules;if(n&&n.preFetch)try{t.kv=t.kv||[],this.logger.info("executing preFetch"),n.preFetch(e,i,t)}catch(e){this.logger.error("failed to execute preFetch",e)}},e}();t.YieldClient=p},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(26),r=i(28),o=function(){function e(){}return e.getProvider=function(e,t){switch(e.ti.toLowerCase()){case"dfp":return new n.DFP(t);case"prebidder_appnexus":case"prebidder_appnexus_inv_code":var i=this.getBidConfigParams(e);return i?new r.SingleBidder(t,i):null;default:return null}},e.getBidConfigParams=function(e){switch(e.ti){case"prebidder_appnexus":return{bidder:"appnexus",params:{placementId:e.au}};case"prebidder_appnexus_inv_code":return{bidder:"appnexus",params:{member:e.a.memberId,invCode:e.au}}}return null},e}();t.ProviderFactory=o},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=i(9),s=i(3),a=i(1),d=i(0),l=i(7),p=i(5),u=function(e){function t(t){var i=e.call(this,t,"dfp")||this;return i.logger=new a.Logger("DFP"),i.hasFluidSizeSupport=!0,i}return r(t,e),t.prototype.fetch=function(e,t){var i=this;return new Promise(function(n){i.logger.info("fetching spot "+i.spot.adIndex,i.spot),t.appendAndGetWrapper(i.spot).then(function(e){return i.addGPTScriptTag(e)}).then(function(t){return i.pushGoogleTagCommands(t,e)}).then(function(e){return n(e)}).catch(function(e){i.logger.error("fetching failed: ",e),n(p.CallbackType.ERROR)})})},t.prototype.pushGoogleTagCommands=function(e,t){var i=this;return new Promise(function(n){var r=i.buildSizesArray(),o=i.getGoogletag(e);o.cmd.push(function(){var e=i.getAdSelector(),a=o.defineSlot("/"+t.a.pubID+"/"+t.au,r,e).addService(o.pubads());i.addKeyValues(t,a),i.logger.info("spot "+i.spot.adIndex+", definedSlot: "+a.getAdUnitPath()+", sizes:"+JSON.stringify(r)+", keyValue: "+JSON.stringify(a.getTargetingMap()));var d=setTimeout(function(){return i.handleAdMatchFalse(a,n)},t.t);o.pubads().addEventListener("slotRenderEnded",function(e){return i.slotRenderEndedEvent(e,n,d)});var l="false"===t.a.upc||!t.a.upc;i.display(o,e,a,l),s.EventsService.get().sendAdRequest(i.spot,i.providerName)})})},t.prototype.addKeyValues=function(e,t){e.kv&&e.kv.forEach(function(e){t.setTargeting(e.k,e.v)})},t.prototype.handleAdMatchFalse=function(e,t){this.spot.isImpression=!1;var i=this.getGoogletag(this.spot.browsiAd);s.EventsService.get().sendAdMatchedEvent(this.spot,this.providerName,!1),i.destroySlots([e]),this.removeAdFromDom(this.spot),t(p.CallbackType.FAILURE)},t.prototype.getGoogletag=function(e){return e.win&&e.win.googletag||{}},t.prototype.display=function(e,t,i,n){(e.enableServices(),e.pubads().disableInitialLoad(),window.google_DisableInitialLoad)?(e.display(t),e.pubads().refresh([i],{changeCorrelator:n})):(1===e.pubads().getSlots().length&&e.display(t),e.pubads().refresh([i],{changeCorrelator:n}))},t.prototype.addGPTScriptTag=function(e){var t=this;return new Promise(function(i,n){if(e&&e.win){var r=e.win.document.createElement("script");r.async=!0,r.setAttribute("src","https://www.googletagservices.com/tag/js/gpt.js"),r.addEventListener("load",function(){i(e)}),e.win.document.head.appendChild(r)}else t.logger.error("failed to append gpt script tag"),n(e)})},t.prototype.slotRenderEndedEvent=function(e,t,i){if(this.getAdSelector()===e.slot.getSlotElementId())if(clearTimeout(i),e.isEmpty)this.handleAdMatchFalse(e.slot,t);else{var n=this.getAdSize(e);this.spot.selectedSize=d.Utils.findSizeInSpot(this.spot,n),this.spot.providerName=this.providerName,this.spot.browsiAd=Object.assign({},this.spot.browsiAd,n),s.EventsService.get().sendAdMatchedEvent(this.spot,this.providerName,!0),l.isNullOrUndefined(this.spot.selectedSize)?(this.logger.warn("No size match for spot: ",this.spot,e),t(p.CallbackType.ERROR)):this.expendAd(this.spot.selectedSize,t)}},t.prototype.getAdSize=function(e){return e&&Array.isArray(e.size)?{w:e.size[0],h:e.size[1]}:{w:-1,h:-1}},t.prototype.getAdSelector=function(){return this.spot.browsiAd.container&&this.spot.browsiAd.container.id||""},t.prototype.waitForApiReady=function(e){return new Promise(function(t,i){if(e.win)var n=e.win.googletag||{},r=e.win.setInterval(function(){n&&n.apiReady&&(clearInterval(r),t(e))});else i(e)})},t}(o.Provider);t.DFP=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(1),r=i(0),o=i(3),s=i(7),a=function(){function e(){var e=this;this.logger=new n.Logger("Viewability"),this.spots=[],this.viewabilityCheckInterval=150,this.spotsLocationUpdateInterval=500,this.conf={minViewInitiator:.5,duration:1e3},this.viewabilityCheck=this.throttle(function(t){var i=r.Utils.getScrollPosition();0===e.spots.length?(window.top.removeEventListener("scroll",e.viewabilityCheck),e.logger.info("viewability check has stopped, no more spots")):e.spots.forEach(function(t){return e.checkSpotViewability(t,i)})},this.viewabilityCheckInterval),this.spotsLocationCheck=this.throttle(function(t){0===e.spots.length?window.top.removeEventListener("scroll",e.spotsLocationCheck):e.spots.forEach(function(e){return r.Utils.getSpotCoords(e).top})},this.spotsLocationUpdateInterval)}return e.get=function(){return e._instance||(this._instance=new e),e._instance},e.prototype.subscribe=function(e){var t=this;this.spots.push(e),this.spots.forEach(function(e){return e.offsetTop=r.Utils.getSpotCoords(e).top}),this.spots.forEach(function(e){return t.checkSpotViewability(e,r.Utils.getScrollPosition())}),this.startWatching()},e.prototype.startWatching=function(){window.top.addEventListener("scroll",this.spotsLocationCheck),window.top.addEventListener("scroll",this.viewabilityCheck)},e.prototype.checkSpotViewability=function(e,t){var i=this;if(this.isInView(e,t)){if(s.isNullOrUndefined(e.viewability.startTime)){e.viewability.startTime=Date.now(),this.logger.info("spot "+e.adIndex+" is in view");var n=setInterval(function(e){if(i.spots.includes(e)){var t=r.Utils.getScrollPosition();i.isInView(e,t)?(s.isNullOrUndefined(e.viewability.startTime)&&(e.viewability.startTime=Date.now()),e.viewability.duration=i.getViewedDuration(e),i.shouldSendViewedImpression(e)&&(i.handleViewedSpot(e),clearInterval(n))):(i.handleOUtOfViewSpot(e),clearInterval(n))}},this.viewabilityCheckInterval,e)}else e.viewability.duration=this.getViewedDuration(e);this.shouldSendViewedImpression(e)&&this.handleViewedSpot(e)}else e.viewability.startTime&&this.handleOUtOfViewSpot(e)},e.prototype.handleOUtOfViewSpot=function(e){e.viewability.startTime&&(this.logger.info("spot "+e.adIndex+" is out of view after "+this.getViewedDuration(e)),e.viewability.startTime=void 0,e.viewability.duration=-1)},e.prototype.handleViewedSpot=function(e){e.viewability.viewed=!0,this.spots.splice(this.spots.indexOf(e),1),this.logger.info("viewed spot ["+e.adIndex+"] after "+e.viewability.duration+"ms"),o.EventsService.get().sendViewedImpression(e)},e.prototype.getViewedDuration=function(e){return e.viewability.startTime?Date.now()-e.viewability.startTime:-1},e.prototype.shouldSendViewedImpression=function(e){return!e.viewability.viewed&&e.viewability.duration>=this.conf.duration},e.prototype.throttle=function(e,t){var i=!1;return function(n){i||(e(n),i=!0,setTimeout(function(){i=!1,e(n)},t))}},e.prototype.isInView=function(e,t){if(e.isImpression){var i=r.Utils.getSpotCoords(e).top+this.conf.minViewInitiator*e.browsiAd.h;return t.top<=i&&t.bottom>=i}return!1},e}();t.ViewabilityService=a},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=i(29),s=i(1),a=i(5),d=i(3),l=i(0),p=function(e){function t(t,i){var n=e.call(this,t,[i],i.bidder)||this;return n.hasFluidSizeSupport=!1,n.logger=new s.Logger("SingleBidder"),n}return r(t,e),t.prototype.handlePbjsCommands=function(e,t,i,n){var r=this;this.pbjsInstance&&(this.pbjsInstance.que=this.pbjsInstance.que||[],this.pbjsInstance.que.push(function(){r.pbjsInstance&&(r.adUnit&&r.pbjsInstance.addAdUnits(r.adUnit),r.pbjsInstance.setConfig({enableSendAllBids:!0,debug:r.profile.debugMode}),d.EventsService.get().sendAdRequest(r.spot,r.providerName),r.pbjsInstance.requestBids({adUnitCodes:[r.adUnit.code],bidsBackHandler:function(o){return r.bidsBackHandler(o,t,e,i,n)}}))}))},t.prototype.bidsBackHandler=function(e,t,i,n,r){if(t.wrapper&&t.iframe){var o=this.getHighestBidById(e,t.wrapper.id);if(this.pbjsInstance&&o&&o.adId&&o.width&&o.height){var s={w:o.width,h:o.height};this.spot.selectedSize=l.Utils.findSizeInSpot(this.spot,s),this.spot.providerName=this.providerName,this.spot.browsiAd=Object.assign({},this.spot.browsiAd,s),d.EventsService.get().sendAdMatchedEvent(this.spot,this.providerName,!0);var p=this.buildIframe(t.wrapper.id,o);t.iframe.contentDocument.body.appendChild(p),this.spot.selectedSize?(this.pbjsInstance.renderAd(p.contentWindow.document,o.adId),this.expendAd(this.spot.selectedSize,n)):n(a.CallbackType.FAILURE)}}this.spot.isImpression=!1,d.EventsService.get().sendAdMatchedEvent(this.spot,this.providerName,!1),n(a.CallbackType.FAILURE)},t}(o.PrebidJs);t.SingleBidder=p},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=i(1),s=i(9),a=i(5),d=i(2),l=function(e){function t(t,i,n){var r=e.call(this,t,n)||this;return r.bidConfigs=i,r.adUnit=r.buildAdUnit(t.getDomId()),r.iframeDoc=null,r.logger=new o.Logger("PrebidJs"),r.profile=d.Profiler.get(),r}return r(t,e),t.prototype.fetch=function(e,t){var i=this;return new Promise(function(n){i.logger.info("fetching spot "+i.spot.adIndex,i.spot),t.appendAndGetWrapper(i.spot).then(function(e){return i.addPrebidScriptTag(e)}).then(function(t){return i.runPbjsCommands(e,t)}).then(function(e){return n(e)}).catch(function(e){i.logger.error("fetching failed: ",e),n(a.CallbackType.ERROR)})})},t.prototype.runPbjsCommands=function(e,t){var i=this;return new Promise(function(n,r){i.handlePbjsCommands(e,t,n,r)})},t.prototype.buildIframe=function(e,t){var i=document.createElement("iframe");return i.id=e,i.width=""+t.width,i.height=""+t.height,i.scrolling="no",i.frameBorder="0",i},t.prototype.getHighestBidById=function(e,t){var i=e[t]&&e[t].bids;return i?i.reduce(function(e,t){return e.cpm>t.cpm?e:t}):null},t.prototype.addPrebidScriptTag=function(e){var t=this;return new Promise(function(i,n){if(e&&e.win){var r=e.win.document.createElement("script");r.async=!0,r.setAttribute("src",t.profile.prebidPath),r.addEventListener("load",function(){e.win&&(t.pbjsInstance=e.win.__browsi_pbjs||e.win.pbjs,i(e))}),e.win.document.head.appendChild(r)}else t.logger.error("failed to inject "+t.profile.prebidPath),n(e)})},t.prototype.buildAdUnit=function(e){return{code:e,mediaTypes:{banner:{sizes:this.buildSizesArray()}},bids:this.bidConfigs}},t}(s.Provider);t.PrebidJs=l},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(31),r=i(32),o=function(){function e(){}return e.getEmbedder=function(e,t){switch(e.ti.toLowerCase()){case"dfp":return"true"===e.a.inIFrame?new r.default(t):new n.default(t);case"prebidder_appnexus":case"prebidder_appnexus_inv_code":return new r.default(t);default:return null}},e}();t.EmbeddingFactory=o},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.appendAndGetWrapper=function(e){var t=this;return new Promise(function(i,n){if(e.ref&&e.ref.parentNode){var r=document.createElement("div"),o=document.createElement("div");o.id=t.containerId,r.id=t.wrapperId,r.appendChild(o),t.appendAd(e,r),e.browsiAd.win=window,e.browsiAd.wrapper=r,e.browsiAd.container=o,e.browsiAd.iframe=null,i(e.browsiAd)}else n(e.browsiAd)})},t}(i(10).Embedder);t.default=o},function(e,t,i){"use strict";var n,r=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])},function(e,t){function i(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){function t(t){return e.call(this,t)||this}return r(t,e),t.prototype.appendAndGetWrapper=function(e){var t=this;return new Promise(function(i,n){if(e.ref&&e.ref.parentNode){var r=document.createElement("div"),o=document.createElement("iframe");r.appendChild(o),r.id=t.wrapperId,o.id=t.containerId,o.scrolling="no",o.frameBorder="0",o.marginHeight="0",o.marginWidth="0",o.height="0",o.width="0",o.style.display="none",o.onload=function(){var n=o.contentDocument.createElement("div");n.setAttribute("id",t.containerId),o.contentDocument.open(),o.contentDocument.close(),o.contentDocument.body.appendChild(n),e.browsiAd.win=o.contentWindow,e.browsiAd.wrapper=r,e.browsiAd.container=n,e.browsiAd.iframe=o,i(e.browsiAd)},o.onerror=function(){n(e.browsiAd)},t.appendAd(e,r)}else n(e.browsiAd)})},t}(i(10).Embedder);t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(34),r=i(1),o=i(0),s=i(2),a=function(){function e(){this.SCRIPT_SRC="//z.moatads.com/browsidisplay14489870757/moatad.js",this.logger=new r.Logger("Moat Initialized")}return e.get=function(){return e._instance||(this._instance=new e),e._instance},e.prototype.generateMoatUrl=function(e){var t={moatClientLevel1:e.providerName,moatClientLevel2:s.Profiler.get().identity.siteKey,moatClientLevel3:e.fold,moatClientLevel4:e.adIndex};return this.SCRIPT_SRC+"#"+n.stringify(t)},e.prototype.injectMoat=function(e){var t=this;if(this.logger.info("injecting moat for spot "+e.adIndex),e.browsiAd.wrapper){var i=this.generateMoatUrl({providerName:e.providerName?e.providerName:"NA",fold:o.Utils.getElementFoldNumber(e.browsiAd.wrapper),adIndex:e.adIndex});o.Utils.appendScript(i,e.browsiAd).catch(function(e){return t.logger.error("failed to inject moat service.")})}},e}();t.MoatService=a},function(e,t,i){"use strict";t.decode=t.parse=i(35),t.encode=t.stringify=i(36)},function(e,t,i){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,i,o){t=t||"&",i=i||"=";var s={};if("string"!=typeof e||0===e.length)return s;var a=/\+/g;e=e.split(t);var d=1e3;o&&"number"==typeof o.maxKeys&&(d=o.maxKeys);var l=e.length;d>0&&l>d&&(l=d);for(var p=0;p<l;++p){var u,c,f,g,h=e[p].replace(a,"%20"),m=h.indexOf(i);m>=0?(u=h.substr(0,m),c=h.substr(m+1)):(u=h,c=""),f=decodeURIComponent(u),g=decodeURIComponent(c),n(s,f)?r(s[f])?s[f].push(g):s[f]=[s[f],g]:s[f]=g}return s};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,i){"use strict";var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,i,a){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?o(s(e),function(s){var a=encodeURIComponent(n(s))+i;return r(e[s])?o(e[s],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[s]))}).join(t):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var i=[],n=0;n<e.length;n++)i.push(t(e[n],n));return i}var s=Object.keys||function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t}},function(e,t){var i,n,r,o;Array.prototype.reduce||Object.defineProperty(Array.prototype,"reduce",{value:function(e){if(null===this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof e)throw new TypeError(e+" is not a function");var t,i=Object(this),n=i.length>>>0,r=0;if(arguments.length>=2)t=arguments[1];else{for(;r<n&&!(r in i);)r++;if(r>=n)throw new TypeError("Reduce of empty array with no initial value");t=i[r++]}for(;r<n;)r in i&&(t=e(t,i[r],r,i)),r++;return t}}),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],r=arguments.length>=2?arguments[1]:void 0,o=0;o<i;o++)if(o in t){var s=t[o];e.call(r,s,o,t)&&n.push(s)}return n}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<i;){var o=t[r];if(e.call(n,o,r,t))return o;r++}}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i},writable:!0,configurable:!0}),Array.from||(Array.from=(i=Object.prototype.toString,n=function(e){return"function"==typeof e||"[object Function]"===i.call(e)},r=Math.pow(2,53)-1,o=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),r)},function(e){var t=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,r=arguments.length>1?arguments[1]:void 0;if(void 0!==r){if(!n(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var s,a=o(t.length),d=n(this)?Object(new this(a)):new Array(a),l=0;l<a;)s=t[l],d[l]=r?void 0===i?r(s,l):r.call(i,s,l):s,l+=1;return d.length=a,d})),Array.prototype.some||(Array.prototype.some=function(e){"use strict";if(null==this)throw new TypeError("Array.prototype.some called on null or undefined");if("function"!=typeof e)throw new TypeError;for(var t=Object(this),i=t.length>>>0,n=arguments.length>=2?arguments[1]:void 0,r=0;r<i;r++)if(r in t&&e.call(n,t[r],r,t))return!0;return!1}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var r,o,s=0|t,a=Math.max(s>=0?s:n-Math.abs(s),0);for(;a<n;){if((r=i[a])===(o=e)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}})}]);