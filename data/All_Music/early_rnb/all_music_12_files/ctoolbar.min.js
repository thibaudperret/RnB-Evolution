/**
* C-Toolbar - v3.2.6 - * 2018-06-20
* Copyright (c) Complex Media Inc.
* Author: Jonathan Crockett <jonathanc@complex.com>
*/

/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

/**
 * @license RequireJS text 2.0.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

(function(){var e,t,n;(function(r){function v(e,t){return h.call(e,t)}function m(e,t){var n,r,i,s,o,u,a,f,c,h,p,v=t&&t.split("/"),m=l.map,g=m&&m["*"]||{};if(e&&e.charAt(0)===".")if(t){e=e.split("/"),o=e.length-1,l.nodeIdCompat&&d.test(e[o])&&(e[o]=e[o].replace(d,"")),e=v.slice(0,v.length-1).concat(e);for(c=0;c<e.length;c+=1){p=e[c];if(p===".")e.splice(c,1),c-=1;else if(p===".."){if(c===1&&(e[2]===".."||e[0]===".."))break;c>0&&(e.splice(c-1,2),c-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((v||g)&&m){n=e.split("/");for(c=n.length;c>0;c-=1){r=n.slice(0,c).join("/");if(v)for(h=v.length;h>0;h-=1){i=m[v.slice(0,h).join("/")];if(i){i=i[r];if(i){s=i,u=c;break}}}if(s)break;!a&&g&&g[r]&&(a=g[r],f=c)}!s&&a&&(s=a,u=f),s&&(n.splice(0,u,s),e=n.join("/"))}return e}function g(e,t){return function(){var n=p.call(arguments,0);return typeof n[0]!="string"&&n.length===1&&n.push(null),s.apply(r,n.concat([e,t]))}}function y(e){return function(t){return m(t,e)}}function b(e){return function(t){a[e]=t}}function w(e){if(v(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!v(a,e)&&!v(c,e))throw new Error("No "+e);return a[e]}function E(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function S(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice,d=/\.js$/;o=function(e,t){var n,r=E(e),i=r[0];return e=r[1],i&&(i=m(i,t),n=w(i)),i?n&&n.normalize?e=n.normalize(e,y(t)):e=m(e,t):(e=m(e,t),r=E(e),i=r[0],e=r[1],i&&(n=w(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return g(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:S(e)}}},i=function(e,t,n,i){var s,l,h,p,d,m=[],y=typeof n,E;i=i||e;if(y==="undefined"||y==="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(d=0;d<t.length;d+=1){p=o(t[d],i),l=p.f;if(l==="require")m[d]=u.require(e);else if(l==="exports")m[d]=u.exports(e),E=!0;else if(l==="module")s=m[d]=u.module(e);else if(v(a,l)||v(f,l)||v(c,l))m[d]=w(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,g(i,!0),b(l),{}),m[d]=a[l]}}h=n?n.apply(a[e],m):undefined;if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!E)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){if(typeof e=="string")return u[e]?u[e](t):w(o(e,t).f);if(!e.splice){l=e,l.deps&&s(l.deps,l.callback);if(!t)return;t.splice?(e=t,t=n,n=null):e=r}return t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s},s.config=function(e){return s(e)},e._defined=a,n=function(e,t,n){if(typeof e!="string")throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),!v(a,e)&&!v(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("libs/almond",function(){}),n("utils",[],function(){"use strict";function e(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)?!0:!1}function t(){return document.body.classList?!0:!1}function n(e){var t="";if(e.youtubeCustomUrl)t="/"+e.youtubeCustomUrl.replace(/^\//,"");else if(e.youtubeChannelId)t="/channel/"+e.youtubeChannelId;else if(e.youtubeChannel)t="/user/"+e.youtubeChannel;else{if(!e.youtubeUserId)return console.error("Complex Toolbar YouTube options invalid."),!1;t="/user/"+e.youtubeUserId}return"http://www.youtube.com"+t}function r(e,t){e&&e.classList.remove(t)}function i(e,t){e.classList.add(t)}function s(e,t){return(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(t)>-1}function o(e){var t=document.createElement("link");t.type="text/css",t.rel="stylesheet",t.href=e,document.getElementsByTagName("head")[0].appendChild(t)}function u(e){return new Promise(function(t,n){var r=document.createElement("script");r.type="text/javascript",document.body.appendChild(r),r.onload=function(){t(!0)},r.onerror=function(e){n(e)},r.src=e})}function a(e){return new Promise(function(t,n){var r=new XMLHttpRequest;r.open("get",e,!0),r.responseType="json",r.onload=function(){var e=r.status;e==200?t(r.response):n(e)},r.send()})}function f(e){console.log("** startDate: ",e.startDate," expirationDate: ",e.expirationDate);var t=new Date(e.startDate||0),n=new Date(e.expirationDate||"2079/12/31"),r=new Date;return console.log("** startDate: ",t," expirationDate: ",n," now: ",r),r>t&&r<n}var l=function(){function s(e){var n=document.createElement("script"),r=!1;n.src=e,n.async=!0,n.onload=n.onreadystatechange=function(){!r&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")&&(r=!0,n.onload=n.onreadystatechange=null,n&&n.parentNode&&n.parentNode.removeChild(n))},t||(t=document.getElementsByTagName("head")[0]),t.appendChild(n)}function o(t,o,u){n="?",o=o||{};for(r in o)o.hasOwnProperty(r)&&(n+=encodeURIComponent(r)+"="+encodeURIComponent(o[r])+"&");var a="json"+ ++e;return i[a]=function(e){u(e);try{delete i[a]}catch(t){}i[a]=null},s(t+n+"callback="+a),a}var e=0,t,n,r,i=this;return{get:o}}();return{hasClass:s,removeClass:r,addClass:i,isMobile:e,loadCss:o,loadJs:u,getJSON:a,checkPromoDate:f,JSONP:l,generateYoutubeUrl:n,isCompatibile:t}}),n("events",[],function(){"use strict";function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:undefined};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}var e={};return e.trigger=function(e,n){var r=new t(e,n);window.dispatchEvent(r)},t.prototype=window.Event.prototype,e}),n("options",[],function(){"use strict";var e={};return e.set=function(t){e.tbOptions=t},e.get=function(){return e.tbOptions},e}),n("tracking",["utils"],function(e){"use strict";function u(e){var t;return e.indexOf("://")>-1?t=e.split("/")[2]:t=e.split("/")[0],t=t.split(":")[0],t}function a(){if(document.querySelector("link[rel='canonical']")){var e=document.querySelector("link[rel='canonical']").href;return e}return!1}function f(e){var t={},n,r,i,s;n=e.split("&"),n&&n[0].substring(0,1)==="?"&&(n[0]=n[0].substring(1));for(i=0,s=n.length;i<s;i++)r=n[i].split("="),t[r[0]]=r[1];return t}function l(e){var t={},n,r=f(e);for(var i in r)i.substr(0,4)==="utm_"&&(n=i,n==="campaign"&&(n="name"),t[n]=r[i]);return t}function c(){var e=new Date,t=e.getHours(),n="",r={};return t<6?n="night":t<6?n="morning":t<18?n="afternoon":n="evening",r.hour_of_day=String(t),r.part_of_day=n,r.timezone_offset=String(Math.floor(e.getTimezoneOffset()/60)),r}var t="UA-30251-55",n="cToolbarTracker",r="UA-30251-55",i="cToolbarVideoTracker",s="New Toolbar",o={};return typeof ga!="undefined"?(ga("create",t,"auto",n),ga("create",r,"auto",i)):(function(e,t,n,r,i,s,o){e.GoogleAnalyticsObject=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,s=t.createElement(n),o=t.getElementsByTagName(n)[0],s.async=1,s.src=r,o.parentNode.insertBefore(s,o)}(window,document,"script","//www.google-analytics.com/analytics.js","cToolbarGA"),cToolbarGA("create",t,"auto",n),cToolbarGA("create",r,"auto",i)),window.addEventListener("ctoolbar.ready",function(){}),window.addEventListener("ctoolbar.show",function(){}),window.addEventListener("ctoolbar.hide",function(){}),o.trackPageview=function(e,t){t||(t=n),typeof ga!="undefined"?ga(t+".send","pageview"):cToolbarGA(t+".send","pageview")},o.trackEvent=function(e,t){t||(t=n),typeof ga!="undefined"?ga(t+".send",{hitType:"event",eventCategory:e.category||s,eventAction:e.action,eventLabel:e.label}):cToolbarGA(t+".send",{hitType:"event",eventCategory:e.category||s,eventAction:e.action,eventLabel:e.label})},o}),n("cookie",[],function(){"use strict";var e={};return e.set=function(e,t,n){var r=14,i=new Date;n?i.setTime(i.getTime()+n):i.setTime(i.getTime()+r*24*60*60*1e3);var s="expires="+i.toUTCString();document.cookie=e+"="+t+"; "+s},e.get=function(e){var t=e+"=",n=document.cookie.split(";");for(var r=0;r<n.length;r++){var i=n[r];while(i.charAt(0)==" ")i=i.substring(1);if(i.indexOf(t)==0)return i.substring(t.length,i.length)}return""},e}),n("libs/text",["module"],function(e){"use strict";var n,r,i,s,o,u=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,f=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,l=typeof location!="undefined"&&location.href,c=l&&location.protocol&&location.protocol.replace(/\:/,""),h=l&&location.hostname,p=l&&(location.port||undefined),d={},v=e.config&&e.config()||{};n={version:"2.0.14",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(f);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:v.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=u[t];try{e=new ActiveXObject(n)}catch(r){}if(e){u=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.lastIndexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,t,r,i){var s,o,u,a=n.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===t)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,t,r,i){r=t?n.strip(r):r,v.isBuild&&(d[e]=r),i(r)},load:function(e,t,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}v.isBuild=i&&i.isBuild;var s=n.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=t.toUrl(o),a=v.useXhr||n.useXhr;if(u.indexOf("empty:")===0){r();return}!l||a(u,c,h,p)?n.get(u,function(t){n.finishLoad(e,s.strip,t,r)},function(e){r.error&&r.error(e)}):t([o],function(e){n.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,t,r,i){if(d.hasOwnProperty(t)){var s=n.jsEscape(d[t]);r.asModule(e+"!"+t,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,t,r,i,s){var o=n.parseName(t),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";n.load(a,r,function(t){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},n.write(e,a,r,s)},s)}};if(v.env==="node"||!v.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"]&&!process.versions["atom-shell"])r=t.nodeRequire("fs"),n.get=function(e,t,n){try{var i=r.readFileSync(e,"utf8");i[0]==="ï»¿"&&(i=i.substring(1)),t(i)}catch(s){n&&n(s)}};else if(v.env==="xhr"||!v.env&&n.createXhr())n.get=function(e,t,r,i){var s=n.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);v.onXhr&&v.onXhr(s,e),s.onreadystatechange=function(n){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):t(s.responseText),v.onXhrComplete&&v.onXhrComplete(s,e))},s.send(null)};else if(v.env==="rhino"||!v.env&&typeof Packages!="undefined"&&typeof java!="undefined")n.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(v.env==="xpconnect"||!v.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)i=Components.classes,s=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),o="@mozilla.org/windows-registry-key;1"in i,n.get=function(e,t){var n,r,u,a={};o&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(s.nsIFileInputStream),n.init(u,1,0,!1),r=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(s.nsIConverterInputStream),r.init(n,"utf-8",n.available(),s.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),r.readString(n.available(),a),r.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return n}),n("libs/text!../templates/mobile.html",[],function(){return'        <div class="ctoolbar-mobile">\n            <div class="tb-box tb-logo tb-logo-slim">\n                <a id="tb-logo-link" href="" target="_self"><span class=""></span></a>\n            </div>\n\n            <div class="tb-box tb-twitter">\n                <i class="tb-btn-icon tb-twitter-icon"></i>\n            </div>\n            \n            <div class="tb-box tb-facebook">\n                <i class="tb-btn-icon tb-facebook-icon"></i>\n            </div>\n            <div class="tb-box-right">\n\n            </div>\n            <!--\n            <div class="tb-box tb-email right-btn tb-inactive">\n                <a href="" class="tb-btn-link"><i class="tb-envelope-icon"></i></a>\n            </div>\n            -->\n        </div>\n\n        <div id="cmmobadtag_toolbar_ad"></div>\n'}),n("libs/text!../templates/mobile-right-button.html",[],function(){return'<a href="" target="_blank" class="tb-btn-url">\n   <i class="tb-btn-icon"></i>\n</a>'}),n("mobile-right-button",["utils","libs/text!../templates/mobile-right-button.html","tracking","options","events"],function(e,t,n,r,i){"use strict";var s=function(){};return s.prototype.create=function(e){this.options=e;var r=document.createElement("div");return r.classList.add("tb-right-btn"),r.classList.add(e.class),r.innerHTML=t,r.querySelector(".tb-btn-url").href=e.url,r.addEventListener("click",function(){n.trackEvent({action:e.eventAction,label:e.url})}),this.btnElem=r,document.querySelector(e.parentSelector).appendChild(r),this},s.prototype.destroy=function(){this.btnElem.parentNode.removeChild(this.btnElem)},s.prototype.update=function(){},s.prototype.show=function(){e.removeClass(btn,"tb-inactive")},s.prototype.hide=function(){e.addClass(btn,"tb-inactive")},s}),n("mobile-ui",["utils","libs/text!../templates/mobile.html","tracking","options","events"],function(e,n,r,i,s){"use strict";function u(e){return e.replace(/&/g,"and")}this.btns=[];var o;return this.load=function(){this.options=i.get(),this.options.vanillaMode=!0,this.btns.forEach(function(e,t){e.destroy()}),this.btns=[],this.toolbarElem=document.getElementById("ctoolbar"),this.mobileToolbarHeight=35,document.querySelector(".ctoolbar-mobile")||(this.toolbarElem.innerHTML=n),this.options.mobileOffset?this.options.mobileShowOnScroll=!1:o||(this.toolbarElem.style.bottom=-this.mobileToolbarHeight+"px"),e.removeClass(document.querySelector(".ctoolbar-mobile"),"tb-inactive");if(window.cToolbarAd){var t=this.options.keyValue||this.options.keyvalue;cToolbarAd.init({keyValue:t})}this.options.mobileShowOnScroll?(this.options.mobileOffsetTransition.duration&&(this.toolbarElem.style.transitionDuration=this.options.mobileOffsetTransition.duration+"s"),this.options.mobileOffsetTransition.ease&&(this.toolbarElem.style.transitionTimingFunction=this.options.mobileOffsetTransition.ease),o||window.addEventListener("scroll",this.onScrollShowHideToolbar)):this.show(),o||(document.querySelector(".tb-box.tb-logo").addEventListener("click",function(){r.trackEvent({action:"Complex Icon",label:this.options.logoUrl})}.bind(this)),document.querySelector("#tb-logo-link").href=this.options.logoUrl),o=!0},this.show=function(){this.options.vanillaMode===!0&&(document.querySelector(".tb-box.tb-logo").classList.add("tb-inactive"),document.querySelector(".tb-box-right").classList.add("tb-inactive")),this.toolbarElem.style.bottom=this.options.mobileOffset+"px",e.removeClass(this.toolbarElem,"tb-hide"),s.trigger("ctoolbar.show"),window.cToolbarAd&&setTimeout(function(){cToolbarAd.setOffset(this.options.mobileOffset+this.mobileToolbarHeight+"px",this.options.mobileOffsetTransition),document.querySelector(".ctoolbar-mobile").remove()}.bind(this),0)},this.hide=function(){s.trigger("ctoolbar.hide"),this.toolbarElem.style.bottom=-this.toolbarElem.offsetHeight+"px",e.addClass(this.toolbarElem,"tb-hide"),window.cToolbarAd&&cToolbarAd.setOffset(this.options.mobileOffset+"px",this.options.mobileOffsetTransition)},this.onScrollShowHideToolbar=function(){document.body.scrollTop===0?this.hide():e.hasClass(this.toolbarElem,"tb-hide")&&this.show()}.bind(this),this.initRightBtn=function(e){switch(e){case"youtube":this.initYoutubeBtn();break;case"sms":this.initSMSBtn();break;case"email":this.initEmailBtn();break;case"snapchat":this.initSnapchatBtn()}},this.initEmailBtn=function(){var e="mailto:?subject=Check this out&body="+encodeURIComponent(u(this.options.shareText))+" "+this.options.url;t(["mobile-right-button"],function(t){var n=new t;n.create({parentSelector:".tb-box-right",eventAction:"Mobile: Email","class":"tb-email",url:e}),this.btns.push(n)}.bind(this))},this.initSMSBtn=function(){var e;navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)?e="sms://&body=":e="sms:?body=",t(["mobile-right-button"],function(t){var n=new t;n.create({parentSelector:".tb-box-right",eventAction:"Mobile: SMS","class":"tb-sms",url:e}),this.btns.push(n)}.bind(this))},this.initYoutubeBtn=function(){var n=e.generateYoutubeUrl(this.options);n&&t(["mobile-right-button"],function(e){var t=new e;t.create({parentSelector:".tb-box-right",eventAction:"Mobile: Youtube","class":"tb-youtube",url:n}),this.btns.push(t)}.bind(this))},this.initSnapchatBtn=function(){this.options.snapchatRelUrl&&t(["mobile-right-button"],function(e){var t=new e;this.options.snapchatRelUrl[0]!="/"&&(this.options.snapchatRelUrl="/"+this.options.snapchatRelUrl),t.create({parentSelector:".tb-box-right",eventAction:"Mobile: Snapchat","class":"tb-snapchat",url:"https://www.snapchat.com"+this.options.snapchatRelUrl}),this.btns.push(t)}.bind(this))},this.destroy=function(){console.log("DESTROY MOBILE UI"),window.removeEventListener("scroll",this.onScrollShowHideToolbar),o=!1;var e=document.querySelector(".ctoolbar-mobile"),t;return e?(t=e.cloneNode(!0),e.parentNode.replaceChild(t,e),t.parentNode.removeChild(t),s.trigger("ctoolbar.mobileUIDestroyed"),!0):!1},this.initFacebookBtn=function(){o||document.querySelector(".ctoolbar-mobile .tb-facebook").addEventListener("click",function(){window.open("https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(this.options.url),"facebook-share-dialog","width=626,height=436"),r.trackEvent({action:"Mobile: Facebook",label:this.options.url})}.bind(this)),this.initTwitterBtn=function(){var e="";this.options.twitterHandle?e=this.options.shareText+" @"+this.options.twitterHandle:e=this.options.shareText,o||document.querySelector(".ctoolbar-mobile .tb-twitter").addEventListener("click",function(){window.open("https://twitter.com/share?url="+encodeURIComponent(this.options.url)+"&text="+encodeURIComponent(e),"twitter-share-dialog","width=626,height=436"),r.trackEvent({action:"Mobile: Twitter",label:this.options.url})}.bind(this))}},this}.bind({})),n("libs/text!../templates/video.html",[],function(){return'        \n\n    <div id="video-channel" class="ctoolbar-video">\n<!--     <script type="text/javascript">\n      window.HELP_IMPROVE_VIDEOJS = false; // don\'t send videojs anayltics to brightcove\n    </script>\n -->\n\n\n    <style id="font-faces">\n\n    @font-face {\n      font-family: "Tungsten Cond Book";\n      src: url("{{cdn}}/css/fonts/TungstenCond-Book.otf");\n    }\n\n    @font-face {\n      font-family: "Tungsten Medium";\n      src: url("{{cdn}}/css/fonts/Tungsten-Medium.otf");\n    }\n\n    @font-face {\n      font-family: "Tungsten Bold";\n      src: url("{{cdn}}/css/fonts/Tungsten-Bold.otf");\n    }\n    </style>\n\n          \n          <div id=\'vid-collapsed\' class=\'invisible\'>\n            <div class="collapse-text">\n              <p>Now Playing</p>\n              <div class=\'button\'>\n                <div class=\'right-arrow\'></div>\n              </div>\n            </div>\n          </div>\n\n      <div id="vid-expanded">\n\n            <div class=\'vid-pretext invisible\' id="vid-pretext-overlay">\n              <div class=\'bg\'>\n                <div class=\'vid-heading\'>\n                  Now Playing\n                </div>\n              </div> \n            </div>\n\n\n            <div class="vid-container">\n              <div id="vid-mute" class="vid-button">\n                <div id=\'vol-button\' class=\'unmute-button\'></div>\n              </div>\n\n              <div id="vid-close" class="vid-button">\n                <div class=\'minimize-button\'></div> \n              </div>\n\n              <div id="vid-expand">\n\n              </div>\n\n\n              <!-- TAG START  -->\n              <video id="ctoolbar-video-player" class="video-js" playsinline>\n               <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>\n              </video>\n\n              <!-- TAG END { date: 07 Jun 2017 } -->\n\n\n            </div>\n\n            <div id=\'vid-overlay\' class=\'invisible\'>\n              <div class="overlay-heading">\n              Now Playing\n              </div>\n              <div id=\'vid-title\' class="episode-title">\n                \n              </div>\n              <div class="watch-more">\n                Watch more shows on Complex\n              </div>\n\n\n              <div class=\'showlist-container\'>  \n               <div id="poster-showlist" class=\'showlist\'>\n               \n                <script id="template-showlist-item" type="text/template">\n                  <a href="{{url}}" target="_self"><div class="showlist-poster" id="showlist-{{show}}" style="{{poster-style}}">\n\n\n                      <div class="thumbnail"  >\n                          <img src="{{img}}">\n                      </div>\n                  \n                  </div></a>\n                </script>\n\n                </div>\n\n              </div>\n\n            </div>\n\n          \n        </div>\n\n    </div>\n\n<div id="cmmobadtag_toolbar_ad"></div>'}),n("video-playlist",[],function(){"use strict";function n(e,t,n){return n=n<t.length-1?n+1:0,r(e,t[n]),e.paused()&&e.play(),n}function r(e,t){return e.poster(t.poster||""),e.src(t.sources),e.trigger("playlistitem",t),e.paused()&&e.play(),e}var e={},t={};return e.setup=function(e,i){return t.currentItem=0,t.autoplay=!1,t.delay=0,t.items=i,r(e,i[t.currentItem]),e.on("ended",function(r){t.autoplay&&(t.currentItem=n(e,t.items,t.currentItem))}),!0},e.autoadvance=function(e){return t.autoplay=!0,t.delay=e,!0},e.currentItem=function(){return t.currentItem},e.reset=function(e,n){t.currentItem=0,t.items=n,e.pause(),r(e,n[t.currentItem])},e}),n("video-ui",["utils","libs/text!../templates/video.html","tracking","options","events","cookie","video-playlist"],function(e,t,n,r,i,s,o){"use strict";function R(){console.log("mute"),l.muted(!0),u.muted="muted",w.classList.add("unmute-button"),w.classList.remove("mute-button")}function U(){console.log("unmute"),l.muted(!1),u.muted="unmuted",w.classList.remove("unmute-button"),w.classList.add("mute-button")}function z(){R(),l.pause(),u.paused=!0,T.style.top="",T.style.height=h+"px",T.style.bottom=p+"px",T.style.left="0",T.style.backgroundColor="rgba(0, 0, 0, 0)",N.classList.add("invisible"),C.classList.remove("invisible"),k.classList.add("invisible"),T.classList.remove("modal-open"),document.body.style.overflow="",document.body.style.position="",P=!1,s.set("collapsed",!0,6e5)}function W(){u.paused=!1,l.play(),l.dimensions(O,M),T.style.top="",T.style.height=M+"px",T.style.width=O+"px",T.style.backgroundColor="rgba(0, 0, 0, 0)",T.style.bottom=p+"px",k.classList.add("invisible"),P=!0,H=!1,S.classList.remove("invisible"),E.classList.remove("invisible"),s.set("collapsed",!1,6e5)}function X(){u.paused=!1,T.style.width="100%",T.style.height=A+"px",T.style.backgroundColor="#1d1b1c",T.style.position="fixed",T.style.top="0",T.style.left="0",T.classList.add("modal-open"),document.body.style.overflow="hidden",document.body.style.position="fixed",U();var e=window.matchMedia("(orientation:landscape)").matches;e?l.dimensions(L,A):(k.classList.remove("invisible"),l.dimensions(_,D)),P=!1,H=!0,document.getElementById("template-showlist-item")!=null&&K(q),n.trackEvent({action:"Expand Overlay",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker")}function V(){var e=A!==screen.height?!0:!1;A=e?screen.height:window.innerHeight,L=e?screen.width:window.innerWidth,M=parseInt(L*c*.5625),O=parseInt(L*c),D=window.matchMedia("(orientation:portrait)").matches?L*.5625:A,_=L}function $(){window.cToolbarAd&&(cToolbarAd.init(),setTimeout(function(){cToolbarAd.setOffset("0px",u.options.mobileOffsetTransition),window.addEventListener("orientationchange",function(){cToolbarAd.setOffset("0px",u.options.mobileOffsetTransition)})}.bind(u),0))}function J(){var t=u.options.promo||null;return t?e.checkPromoDate(t)?!0:!1:!1}function K(e){function f(t,n){e.forEach(function(t,o){s.push({id:"showlist-"+t.show,title:t.title});var a=u.toolbarCDNDomain?u.toolbarCDNDomain+t.image:t.image,f=o===e.length-1?"margin-right: 0px;":"margin-right: 10px;";f+=" width: "+n+"px;",i+=r.replace(/{{img}}/g,a).replace(/{{title}}/g,t.title).replace(/{{show}}/g,t.show).replace(/{{url}}/g,t.url).replace(/{{poster-style}}/g,f)});var o=document.getElementById("poster-showlist"),a=e.length,f=(a+1)*10;o.innerHTML=i,o.style.height=t+"px",o.style.marginRight=-(n*a+f-L)+"px"}var t=document.getElementById("template-showlist-item"),r=t.innerHTML,i="",s=[],o=A*.32,a=.66*o;f(o,a),v=!0,s.forEach(function(e){document.getElementById(e.id).addEventListener("click",function(){n.trackEvent({action:"Show Click",category:F,label:"["+d+"] | "+u.muted+"] | ["+m+"] | ["+e.title+"]"},"cToolbarVideoTracker")})})}var u={};u.options=r.get(),u.muted="muted",u.paused=!0,u.currentTime=null;var a={play:new Event("play"),playing:new Event("playing"),pause:new Event("pause"),ended:new Event("ended")},f="ctoolbar-video-player",l=null,c=.5,h=30,p=0,d="",v=!1,m="",g=!0,y=document.getElementById("ctoolbar"),b=[],d="",w,E,S,x,T,N,C,k,L,A,O,M,_,D,P=!0,H=!1,B=!1,j=!1,F="Mobile: Video Feed",I=!1,q=[{show:"hot-ones",title:"Hot Ones",image:"/img/shows/Hotones_poster_1.jpg",staging_url:"http://staging.complex.com/video/hot-ones-show",url:"http://www.complex.com/video/hot-ones-show"},{show:"sneaker-shopping",title:"Sneaker Shopping",image:"/img/shows/SneakerShopping_poster_1.jpg",staging_url:"http://staging.complex.com/video/sneaker-shopping-show",url:"http://www.complex.com/video/sneaker-shopping-show"},{show:"complex-news",title:"Complex News",image:"/img/shows/ComplexNews_poster_1.jpg",staging_url:"http://staging.complex.com/video/complex-news-videos",url:"http://complex.com/video/complex-news-videos"},{show:"everyday-struggle",title:"Everyday Struggle",image:"/img/shows/EverydayStruggle_vertical_1.jpg",staging_url:"http://staging.complex.com/video/everyday-struggle-show",url:"http://www.complex.com/video/everyday-struggle-show"},{show:"life-at-complex",title:"Life at Complex",image:"/img/shows/LifeAtComplex_poster_1.jpg",staging_url:"http://staging.complex.com/video/life-at-complex-show",url:"http://www.complex.com/video/life-at-complex-show"},{show:"dont-believe-the-hype",title:"Don	 Believe the Hype",image:"/img/shows/DontBelievetheHype_poster_1.jpg",staging_url:"http://staging.complex.com/video/dont-believe-the-hype-show",url:"http://www.complex.com/video/dont-believe-the-hype-show"},{show:"magnum-opus",title:"Magnum Opus",image:"/img/shows/MagnumOpus_poster_1.jpg",staging_url:"http://staging.complex.com/video/magnum-opus-show",url:"http://www.complex.com/video/magnum-opus-show"},{show:"the-neighborhood",title:"The Neighborhood",image:"/img/shows/Theneighborhood_poster_1.jpg",staging_url:"http://staging.complex.com/video/the-neighborhood-show",url:"http://www.complex.com/video/the-neighborhood-show"}];return u.setOffset=function(e){p=e,T&&(T.style.bottom=p+"px")},u.update=function(e){console.log("videoUI.update");var t=u.options;u.options=r.get();var n=j;j=J(),$();if(s.get("no-video")=="true")return console.log("no video"),!0;j&&n&&(n=t.promo.videoJSON===u.options.videoJSON?!0:!1),!document.querySelector(".ctoolbar-video")||l===null||n!=j?(b=[],u.load(e,!0)):u.options.videoCollapsed===!0||s.get("collapsed")=="true"?z():(N.classList.remove("invisible"),C.classList.add("invisible"),W(),T.style.bottom=p+"px")},u.load=function(a,c){function Q(e,t){var n=[];for(var r in e)e[r].type===t&&n.push(e[r]);return n}function G(e,t){return e.forEach(function(e){var n={};n.show_title="Complex",n.title=e.attributes.title,n.image=e.attributes.image_roku_291_164,n.videoId=e.id;var r=e.relationships.video.data.id;t.forEach(function(e){e.id===r&&(n.url_mp4=e.attributes.url_mp4,n.url_m3u8=e.attributes.url_m3u8)}),b.push(n)}),b}function Y(e){return new Promise(function(t,n){var r=Q(e.included,"video-posts")||[],i=Q(e.included,"livestream-posts")||[];r=r.concat(i);var s=Q(e.included,"videos");b=G(r,s);var o=[];b.forEach(function(e,t){console.log("toolbar MP4 SOURCE");var n=[{src:e.url_mp4,type:"video/mp4"}],r={sources:n,poster:e.image,videoId:e.videoId};o.push(r)});if(o.length>0)t(o);else{var u=new Error("No playlist input data");n(u)}})}function Z(e){function t(){j===!0?(n.trackEvent({action:"CTA Clicked",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker"),window.location.href=u.options.promo.ctaUrl):(s.set("collapsed",!1,6e5),u.paused=!1,N.classList.remove("invisible"),C.classList.add("invisible"),T.style.height=M+"px",et(),nt(e),n.trackEvent({action:"Expand Collapsed State",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker"),T.removeEventListener("click",t,!1))}x=document.getElementById("vid-expand"),w=document.getElementById("vol-button"),S=document.getElementById("vid-mute"),E=document.getElementById("vid-close"),T.style.height=h+"px",T.style.bottom=p+"px",N.classList.add("invisible"),C.style.display="block",k.classList.add("invisible"),C.classList.remove("invisible"),g&&tt(0),T.style.transform="translateX(0)",u.paused=!0,u.muted="muted",T.addEventListener("click",t,!1)}function et(e){function r(){u.muted==="muted"?(U(),n.trackEvent({action:"Unmute",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker")):(R(),n.trackEvent({action:"Mute",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker"))}l?console.log("initPlayer - player already exists"):(l=videojs(f,{muted:!0},function(){this.ga({debug:!0})}),u.currentTime=l.currentTime()),l.dimensions(O,M);var t=document.getElementById("vid-title");C.classList.add("invisible"),N.classList.remove("invisible"),T.style.width=O,T.style.bottom=p+"px",l.play(),j===!0&&l.on("ended",function(){z()}),setTimeout(function(){if(B===!0)return console.log("video autoplayed"),!0;u.destroy(500),s.set("no-video",!0,6e5),n.trackEvent({action:"Error: Autoplay timeout",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker")},1e4),S.addEventListener("click",r),x.style.height="100%",x.style.width="100%",x.style.position="absolute",x.style.zIndex="1",x.addEventListener("click",function(){g&&tt(0),j===!0?(n.trackEvent({action:"Promo Video Clicked",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker"),window.location.href=u.options.promo.ctaUrl):H?l.play():(X(),l.play())});var a=document.getElementById("vid-pretext-overlay");j||a.classList.remove("invisible"),a.addEventListener("click",function(){console.log("pretext clicked"),tt(0)}),E.addEventListener("click",function(){H?(W(),n.trackEvent({action:"Close Overlay",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker")):n.trackEvent({action:"Minimize",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker"),z()}),C.addEventListener("click",function(){j===!0?(n.trackEvent({action:"CTA Clicked",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker"),window.location.href=u.options.promo.ctaUrl):(N.classList.remove("invisible"),C.classList.add("invisible"),U(),W(),T.style.bottom=p+"px",n.trackEvent({action:"Expand Collapsed State",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker"))}),window.addEventListener("orientationchange",function(){V(),H?(k.style.marginTop=D+"px",T.style.width="100%",T.style.height="100%",window.matchMedia("(orientation:landscape)").matches?(k.classList.add("invisible"),l.dimensions(L,A)):(k.classList.remove("invisible"),l.dimensions(_,D))):(P&&(T.style.height=M+"px"),T.style.width=O+"px",l.dimensions(O,M),k.style.marginTop=D+"px")}),k.style.marginTop=D+"px",k.style.height=window.matchMedia("(orientation:portrait)").matches?A-D+"px":L-D+"px",l.on("play",function(e){B=!0;var r=o.currentItem(),s=b[r];g&&tt(1e3),u.muted==="muted"?l.muted(!0):l.muted(!1),u.paused?l.pause():l.play(),t.innerHTML=s.title,d=s.videoId,n.trackEvent({action:"Autoplay",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker"),i.trigger("ctoolbar.play")}),l.on("playing",function(){i.trigger("ctoolbar.playing")}),l.on("ended",function(){I=!1,i.trigger("ctoolbar.ended")}),l.on("pause",function(){i.trigger("ctoolbar.pause")}),l.on("timeupdate",function(){u.currentTime=l.currentTime(),l.currentTime()>=3&&!I&&(I=!0,console.log("played for 3 sec"),n.trackEvent({action:"Played for 3 sec",category:F,label:"["+d+"] | ["+u.muted+"] | ["+m+"]"},"cToolbarVideoTracker"))})}function tt(e){console.log("destroyPretext");var t=document.getElementById("vid-pretext-overlay");setTimeout(function(){t.style.transform="translateX(-100%)"},e),g=!1}function nt(e){o.setup(l,e),o.autoadvance(0),l.play()}u.options=r.get(),console.log("video-ui loaded"),console.log("version 6.1: videojs player with promo module"),u.toolbarCDNDomain=a,j=J(),V(),u.muted="muted",u.paused=!1,v=!1,m=document.querySelector("meta[property='og:title']")?document.querySelector("meta[property='og:title']").content:"No OG Title",g=j===!1?!0:!1,c||$();if(s.get("no-video")=="true")return console.log("no video"),!0;if(!document.querySelector(".ctoolbar-video")){y.innerHTML=t,T=document.getElementById("video-channel"),N=document.getElementById("vid-expanded"),x=document.getElementById("vid-expand"),w=document.getElementById("vol-button"),S=document.getElementById("vid-mute"),E=document.getElementById("vid-close"),C=document.getElementById("vid-collapsed"),k=document.getElementById("vid-overlay"),T.style.height=M+"px",T.style.bottom=p+"px",y.style.bottom="0px",j===!0?C.querySelector(".collapse-text").querySelector("p").innerHTML=u.options.promo.ctaText||"Watch This":C.querySelector(".collapse-text").querySelector("p").innerHTML="Now Playing",q("font-faces");function q(e){var t=document.getElementById(e),n=t.innerHTML,r="",i=u.toolbarCDNDomain?u.toolbarCDNDomain:"";r+=n.replace(/{{cdn}}/g,i),t.innerHTML=r}}j===!0?(F="Mobile: Promo Feed",C.querySelector(".collapse-text").querySelector("p").innerHTML=u.options.promo.ctaText,u.options.promo.videoJSON||(u.options.promo.videoJSON="https://cms.complexnetworks.com/api/v1/playlists/8/")):u.options.videoJSON||(u.options.videoJSON="https://cms.complexnetworks.com/api/v1/playlists/1");var K=j?u.options.promo.videoJSON:u.options.videoJSON;e.getJSON(K).then(Y).then(function(e){u.options.videoCollapsed===!0||s.get("collapsed")=="true"?Z(e):l?(o.reset(l,e),j===!0?C.querySelector(".collapse-text").querySelector("p").innerHTML=u.options.promo.ctaText:C.querySelector(".collapse-text").querySelector("p").innerHTML="Now Playing"):(et(),nt(e))}).catch(function(e){console.log("** Error: ",e)})},u.destroy=function(e){console.log("destroy channel");var t=document.getElementById("video-channel");t&&(l&&(l.dispose(),l=null),t.style.transition="all "+e+"ms ease-in",t.style.transform="translateX(-100%)",setTimeout(function(){t.parentNode.removeChild(t)},e))},u}.bind({})),n("libs/text!../templates/desktop.html",[],function(){return'        <div class="ctoolbar-desktop tb-dark">\n            <div class="tb-box tb-logo">    \n                <a id="tb-logo-link" href="" target="_self"><span class="tb-logo-icon"></span></a>\n            </div>\n\n            <div class="tb-box tb-category">\n                <div class="tb-category-label tb-inactive"></div>\n            </div>\n\n            <div class="tb-box tb-share">\n            <!--\n                <div class="tb-facebook tb-inactive tb-btn">\n                    <a href="" target="_blank"class="tb-btn-top-panel">\n                        <i class="tb-facebook-icon"></i> <span class="tb-social-btn-label">Like</span> <span id="tb-facebook-like-text"></span>\n                    </a>\n                    <div class="fb-like-container tb-btn-bottom-panel"></div>\n\n                </div>\n              \n                <div class="tb-twitter tb-inactive tb-btn">\n                    <a href="" target="_blank" class="tb-btn-top-panel">\n                        <i class="tb-twitter-icon"></i> <span class="tb-social-btn-label">Follow</span> <span id="tb-twitter-follow-text"></span></a>\n                    <div class="twitter-follow-container tb-btn-bottom-panel"></div>\n                </div>\n               \n                <div class="tb-youtube tb-inactive tb-btn">\n                    <a href="" target="_blank" class="tb-btn-top-panel"><i class="tb-youtube-icon"></i> <span class="tb-social-btn-label">Subscribe</span> <span id="tb-youtube-subscribe-text"></span>\n                    </a>\n                    <div class="youtube-sucscribe-container tb-btn-bottom-panel">\n                        <div class="g-ytsubscribe" data-channel="" data-layout="default" data-count="default"></div>\n                    </div>\n                </div>\n                -->\n            </div>\n\n            <div class="tb-box tb-ad">\n                <div id="cmn_ad_toolbar" class="adUnits footer-ad"></div>\n            </div>\n        </div>\n        <div class="tb-toggle tb-inactive"><span class="tb-toggle-text">Close</span> <i class="tb-chevron-circle-right"></i></div>\n'}),n("channels",[],function(){"use strict";var e=["Music","Style","Movies","Sports","Games","Luxury"];return e}),n("libs/text!../templates/button.html",[],function(){return'<a href="" target="_blank" class="tb-btn-url">\n    <i class="tb-btn-icon"></i> <span class="tb-btn-label"></span>\n</a>'}),n("button",["utils","libs/text!../templates/button.html","tracking","options","events"],function(e,t,n,r,i){"use strict";var s=function(){};return s.prototype.create=function(e){this.options=e;var r=document.createElement("div");return r.classList.add("tb-btn"),r.classList.add(e.class),r.innerHTML=t,r.querySelector(".tb-btn-label").innerText=e.label,r.querySelector(".tb-btn-url").href=e.url,r.addEventListener("click",function(){n.trackEvent({action:e.eventAction,label:e.url})}),this.btnElem=r,document.querySelector(e.parentSelector).appendChild(r),this},s.prototype.destroy=function(){this.btnElem.parentNode.removeChild(this.btnElem)},s.prototype.update=function(){},s.prototype.show=function(){e.removeClass(btn,"tb-inactive")},s.prototype.hide=function(){e.addClass(btn,"tb-inactive")},s}),n("desktop-ui",["utils","events","libs/text!../templates/desktop.html","tracking","options"],function(e,n,r,i,s){var o=!1;return this.btns=[],this.load=function(){this.options=s.get(),document.querySelector(".ctoolbar-desktop")||(document.getElementById("ctoolbar").innerHTML=r),e.removeClass(document.querySelector(".ctoolbar-desktop"),"tb-solid"),e.removeClass(document.querySelector(".ctoolbar-desktop"),"tb-gradient"),e.addClass(document.querySelector(".ctoolbar-desktop"),"tb-"+this.options.desktopBackground),this.options.vanillaMode&&document.querySelector(".tb-box.tb-logo").classList.add("tb-inactive"),o||(this.toolbarExpanded=!0),this.showChannelBadge(),this.btns.forEach(function(e,t){e.destroy()}),this.btns=[],this.initSocialBtns(),this.initCollapseBtn();if(window.CMNUNT){var t=CMNUNT.slots.cmn_ad_toolbar,n=this.options.keyValue||this.options.keyvalue,u={containerId:"cmn_ad_toolbar"};n&&n.length>0&&(u.keyValue=n),t&&CMNUNT.destroySlots([t]),CMNUNT.load("7x7",u)}o||(cmnunt_site==="ratedred"?document.querySelector(".tb-logo-icon").classList.add("rr"):(document.querySelector(".tb-box.tb-logo").addEventListener("click",function(){i.trackEvent({action:"Complex Icon",label:this.options.logoUrl})}.bind(this)),document.querySelector("#tb-logo-link").href=this.options.logoUrl)),o=!0},this.showChannelBadge=function(){var n=s.get();e.addClass(document.querySelector(".tb-category-label"),"tb-inactive"),document.querySelector(".tb-category-label").innerHTML="";var r;this.options.channel&&t(["channels"],function(t){for(var i=0;i<t.length;i++){r=new RegExp(n.channel,"i");if(r.test(t[i])){document.querySelector(".tb-category-label").innerHTML=t[i],e.removeClass(document.querySelector(".tb-category-label"),"tb-inactive");break}}})}.bind(this),this.onTbToggleClick=function(){this.toolbarExpanded?(document.querySelector(".ctoolbar-desktop").style.right="-100%",document.querySelector(".ctoolbar-desktop").style.marginRight="50px",this.toolbarExpanded=!1,e.addClass(document.querySelector(".tb-toggle"),"expand"),document.querySelector(".tb-toggle-text").innerHTML="Open",window.CMNUNT&&CMNUNT.slots.cmn_ad_toolbar&&(CMNUNT.slots.cmn_ad_toolbar.refreshable=!1),i.trackEvent({action:"Toolbar Collapse",label:"Close (minimize)"}),n.trigger("ctoolbar.collapse")):(document.querySelector(".ctoolbar-desktop").style.right="0%",document.querySelector(".ctoolbar-desktop").style.marginRight="0px",e.removeClass(document.querySelector(".tb-toggle"),"expand"),document.querySelector(".tb-toggle-text").innerHTML="Close",this.toolbarExpanded=!0,window.CMNUNT&&CMNUNT.slots.cmn_ad_toolbar&&(CMNUNT.slots.cmn_ad_toolbar.refreshable=!0),i.trackEvent({action:"Toolbar Collapse",label:"Open (re-expand)"}),n.trigger("ctoolbar.expand"))}.bind(this),this.initCollapseBtn=function(){if(!o){var t=document.querySelector(".tb-toggle");t.addEventListener("click",this.onTbToggleClick),setTimeout(function(){e.removeClass(document.querySelector(".tb-toggle"),"tb-inactive")},5e3)}}.bind(this),this.initSocialBtns=function(){var t=document.querySelectorAll(".tb-share .tb-btn");for(var n=0;n<t.length;n++)e.addClass(t.item(n),"tb-inactive");for(var r=0;r<this.options.desktopSocialButtons.length&&r<3;r++)this.options.desktopSocialButtons[r]==="facebook"&&this.initFacebookBtn(),this.options.desktopSocialButtons[r]==="twitter"&&this.initTwitterBtn(),this.options.desktopSocialButtons[r]==="youtube"&&this.initYoutubeBtn(),this.options.desktopSocialButtons[r]==="instagram"&&this.initInstagramBtn()},this.initFacebookBtn=function(){t(["button"],function(e){var t=new e;this.btns.push(t.create({parentSelector:".tb-share",label:"Like "+this.options.facebookName,eventAction:"Desktop: Facebook","class":"tb-facebook",url:"http://facebook.com/"+this.options.facebookUsername}))}.bind(this))},this.initTwitterBtn=function(){t(["button"],function(e){var t=new e;this.btns.push(t.create({parentSelector:".tb-share",label:"Follow "+this.options.twitterName,eventAction:"Desktop: Twitter","class":"tb-twitter",url:"http://twitter.com/"+this.options.twitterHandle}))}.bind(this))},this.initInstagramBtn=function(){t(["button"],function(e){var t=new e;this.btns.push(t.create({parentSelector:".tb-share",label:"Follow "+this.options.instagramName,eventAction:"Desktop: Instagram","class":"tb-instagram",url:"http://instagram.com/"+this.options.instagramHandle}))}.bind(this))},this.initYoutubeBtn=function(){var n=e.generateYoutubeUrl(this.options),r=this.options.youtubeDisplayName?this.options.youtubeDisplayName:this.options.youtubeChannelName;n&&t(["button"],function(e){var t=new e;t.create({parentSelector:".tb-share",label:"Subscribe to "+r,eventAction:"Desktop: Youtube","class":"tb-youtube",url:n}),this.btns.push(t)}.bind(this))},this.show=function(){e.removeClass(this.toolbarElem,"tb-hide"),n.trigger("ctoolbar.show"),this.options.vanillaMode&&document.querySelector(".tb-box.tb-logo").classList.add("tb-inactive")},this.hide=function(){n.trigger("ctoolbar.hide"),e.addClass(this.toolbarElem,"tb-hide")},this}.bind({})),n("ctoolbar",["utils","module","events","options","tracking","cookie"],function(e,n,r,i,s){var o=o||function(){"use strict";function o(e,r){return t(["video-ui"],function(t){r?t.update(e.toolbarCDNDomain):t.load(e.toolbarCDNDomain),n.videoUI=t}),!0}function u(t,n){var r=n||!1;e.loadJs(t.toolbarCDNDomain+"/dist/videojs/video.min.js").then(function(){return e.loadJs(t.toolbarCDNDomain+"/dist/videojs/videojs-contrib-hls.min.js")}).then(function(){return e.loadJs(t.toolbarCDNDomain+"/dist/videojs/videojs-ctoolbar.ga.js")}).then(function(){return o(t,r),!0}).catch(function(e){console.log("** Error in videojs: ",e)})}function a(n){n.mobileVideo===!0?(e.loadCss(n.toolbarCDNDomain+"/css/video-js.min.css"),console.log("ctoolbar load"),n.debug?o(n):u(n)):t(["mobile-ui"],function(e){e.load()})}function f(e){if(e)if(Array.isArray(e))for(var t=0;t++;t<e[t].length)e[t]=e[t].toLowerCase();else e=e.toLowerCase();return e}var n={};return n.update=function(n){console.log("toolbar updated with options: ",n);var s=i.get(),a={};if(!s)throw Error("Update called when toolbar not intialized.");var f=!1;if(!s.promo||!e.checkPromoDate(s.promo))s.promo=null;for(var l in s)l==="promo"&&s[l]===!1&&(s[l]=null),a[l]=s[l];for(var l in n)a[l]=n[l],l==="promo"&&a[l]===!1&&(a[l]=null);if(!a.promo||!e.checkPromoDate(a.promo))a.promo=null;a.toolbarCDNDomain||(a.toolbarCDNDomain=s.toolbarCDNDomain),i.set(a),s=i.get(),e.isMobile()?s.mobileVideo===!0||s.promo?(e.loadCss(s.toolbarCDNDomain+"/css/video-js.min.css"),t(["mobile-ui"],function(e){e.destroy(),cToolbarAd.setOffset(0),s.debug?o(s,!0):u(s,!0)})):(s.mobileOffset||(s.mobileOffset=0),t(["video-ui"],function(e){e.destroy(),t(["mobile-ui"],function(e){e.load(),e.hide()})})):t(["desktop-ui"],function(e){e.load()}),r.trigger("ctoolbar.update")},n.updateWithAsyncPage=function(e){n.update(e),s.trackPageview()},n.load=function(n){n||(i.get()?n=i.get():n={}),n.url||(document.querySelector("link[rel='canonical']")?n.url=document.querySelector("link[rel='canonical']").href:n.url=location.protocol+"//"+location.host+location.pathname);if(!e.isCompatibile())return console.log("Browser is not compatable with ctoolbar."),s.trackEvent({action:"Failed Load",label:this.options.url}),!1;n.shareText||(document.querySelector("meta[property='og:title']")?n.shareText=document.querySelector("meta[property='og:title']").content:document.querySelector("meta[name='twitter:title']")?n.shareText=document.querySelector("meta[name='twitter:title']").content:n.shareText=document.title),n.desktopSocialButtons||(n.desktopSocialButtons=["facebook","twitter"]),n.desktopSocialButtons=f(n.desktopSocialButtons),n.desktopBackground||(n.desktopBackground="gradient"),n.desktopBackground=f(n.desktopBackground),n.mobileVideo||(n.mobileRightButton||(n.mobileRightButton="email"),n.mobileRightButton=f(n.mobileRightButton)),n.mobileOffset||(n.mobileOffset=0),n.mobileOffsetTransition||(n.mobileOffsetTransition={duration:.25,ease:"linear"}),typeof n.toolbarCDNDomain=="undefined"&&(n.toolbarCDNDomain="//toolbar.complex.com"),n.disableMobile||(n.disableMobile=!1),n.logoUrl||(n.logoUrl="https://about.complex.com"),typeof n.mobileShowOnScroll=="undefined"&&(n.mobileShowOnScroll=!0),n.mobileVideo||(n.mobileVideo=!1),i.set(n),this.toolbarElem=document.createElement("div"),this.toolbarElem.id="ctoolbar",e.isMobile()?n.disableMobile===!1?(e.loadCss(n.toolbarCDNDomain+"/css/ctoolbar.mobile.min.css"),this.toolbarElem.className="tb-mobile tb-hide",n.promo?(console.log("** promo: ",n.promo),e.checkPromoDate(n.promo)?(console.log("** promo is current "),e.loadCss(n.toolbarCDNDomain+"/css/video-js.min.css"),n.debug?o(n):u(n)):a(n)):a(n)):window.cToolbarAd&&cToolbarAd.init():(e.loadCss(n.toolbarCDNDomain+"/css/ctoolbar.desktop.min.css"),this.toolbarElem.className="tb-desktop",t(["desktop-ui"],function(e){e.load()})),document.body.appendChild(this.toolbarElem),s.trackPageview()},n.destroy=function(){n.remove(),console.error("cToolbar.destroy() is deprecated. Please use cToolbar.remove() instead.")},n.remove=function(e){var t,n=document.getElementById("ctoolbar");n&&(t=n.cloneNode(!0),n.parentNode.replaceChild(t,n),t.parentNode.removeChild(t),r.trigger("ctoolbar.remove"),e&&(window.cToolbar=null))},n.removeVideo=function(){t(["video-ui"],function(e){e.destroy()})},n.show=function(){e.removeClass(this.toolbarElem,"tb-hide"),r.trigger("ctoolbar.show"),e.isMobile()&&(document.getElementById("cmn-mob-banner_1")&&e.addClass(document.getElementById("cmn-mob-banner_1"),"tb-ad-up"),document.getElementsByTagName("body")[0].setAttribute("tb-ad-up","true"),t(["mobile-ui"],function(e){e.show()}))},n.hide=function(){r.trigger("ctoolbar.hide"),e.addClass(this.toolbarElem,"tb-hide"),e.isMobile()&&(document.getElementById("cmn-mob-banner_1")&&e.removeClass(document.getElementById("cmn-mob-banner_1"),"tb-ad-up"),document.getElementsByTagName("body")[0].setAttribute("tb-ad-up","false"),t(["mobile-ui"],function(e){e.hide()}))},n.setOffset=function(n){var r=i.get();e.isMobile()&&(r.mobileVideo===!0||r.promo!==null)&&t(["video-ui"],function(e){e.setOffset(n)})},n}.bind({})();window.cToolbar=o,r.trigger("ctoolbar.ready"),window.cToolbarInit&&window.cToolbarInit()}),t(["ctoolbar"])})();